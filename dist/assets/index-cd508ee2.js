var ho=Object.defineProperty;var go=(t,e,n)=>e in t?ho(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(go(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function jt(){}function ai(t){return t()}function nr(){return Object.create(null)}function gt(t){t.forEach(ai)}function ui(t){return typeof t=="function"}function we(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function po(t){return Object.keys(t).length===0}function In(t){return t??""}function R(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Yt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function ot(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function V(){return at(" ")}function ci(){return at("")}function Z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function O(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mo(t){return Array.from(t.childNodes)}function Ot(t,e){e=""+e,t.data!==e&&(t.data=e)}function mt(t,e,n){t.classList.toggle(e,!!n)}function _o(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let pe;function de(t){pe=t}function fi(){if(!pe)throw new Error("Function called outside component initialization");return pe}function hi(t){fi().$$.on_mount.push(t)}function di(){const t=fi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=_o(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const Kt=[],ee=[];let Wt=[];const yn=[],gi=Promise.resolve();let vn=!1;function pi(){vn||(vn=!0,gi.then(mi))}function yo(){return pi(),gi}function wn(t){Wt.push(t)}function vo(t){yn.push(t)}const sn=new Set;let Jt=0;function mi(){if(Jt!==0)return;const t=pe;do{try{for(;Jt<Kt.length;){const e=Kt[Jt];Jt++,de(e),wo(e.$$)}}catch(e){throw Kt.length=0,Jt=0,e}for(de(null),Kt.length=0,Jt=0;ee.length;)ee.pop()();for(let e=0;e<Wt.length;e+=1){const n=Wt[e];sn.has(n)||(sn.add(n),n())}Wt.length=0}while(Kt.length);for(;yn.length;)yn.pop()();vn=!1,sn.clear(),de(t)}function wo(t){if(t.fragment!==null){t.update(),gt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(wn)}}function xo(t){const e=[],n=[];Wt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Wt=e}const Oe=new Set;let qt;function bo(){qt={r:0,c:[],p:qt}}function ko(){qt.r||gt(qt.c),qt=qt.p}function Lt(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function ge(t,e,n,r){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),qt.c.push(()=>{Oe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function et(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mo(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Rn(t){t&&t.c()}function Ue(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),wn(()=>{const o=t.$$.on_mount.map(ai).filter(ui);t.$$.on_destroy?t.$$.on_destroy.push(...o):gt(o),t.$$.on_mount=[]}),i.forEach(wn)}function Qe(t,e){const n=t.$$;n.fragment!==null&&(xo(n.after_update),gt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ao(t,e){t.$$.dirty[0]===-1&&(Kt.push(t),pi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,r,i,o,l=null,s=[-1]){const u=pe;de(t);const a=t.$$={fragment:null,ctx:[],props:o,update:jt,not_equal:i,bound:nr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:nr(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};l&&l(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(h,f,...g)=>{const v=g.length?g[0]:f;return a.ctx&&i(a.ctx[h],a.ctx[h]=v)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](v),c&&Ao(t,h)),f}):[],a.update(),c=!0,gt(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const h=mo(e.target);a.fragment&&a.fragment.l(h),h.forEach(j)}else a.fragment&&a.fragment.c();e.intro&&Lt(t.$$.fragment),Ue(t,e.target,e.anchor),mi()}de(u)}class We{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){Qe(this,1),this.$destroy=jt}$on(e,n){if(!ui(n))return jt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!po(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const No="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(No);function Xe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _i(t){let e,n,r;t.length!==2?(e=Xe,n=(s,u)=>Xe(t(s),u),r=(s,u)=>t(s)-u):(e=t===Xe||t===Eo?t:So,n=t,r=t);function i(s,u,a=0,c=s.length){if(a<c){if(e(u,u)!==0)return c;do{const h=a+c>>>1;n(s[h],u)<0?a=h+1:c=h}while(a<c)}return a}function o(s,u,a=0,c=s.length){if(a<c){if(e(u,u)!==0)return c;do{const h=a+c>>>1;n(s[h],u)<=0?a=h+1:c=h}while(a<c)}return a}function l(s,u,a=0,c=s.length){const h=i(s,u,a,c-1);return h>a&&r(s[h-1],u)>-r(s[h],u)?h-1:h}return{left:i,center:l,right:o}}function So(){return 0}function $o(t){return t===null?NaN:+t}const Oo=_i(Xe),Xo=Oo.right;_i($o).center;const Co=Xo;class rr extends Map{constructor(e,n=Bo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ir(this,e))}has(e){return super.has(ir(this,e))}set(e,n){return super.set(Io(this,e),n)}delete(e){return super.delete(Ro(this,e))}}function ir({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Io({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ro({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Bo(t){return t!==null&&typeof t=="object"?t.valueOf():t}const To=Math.sqrt(50),Yo=Math.sqrt(10),Po=Math.sqrt(2);function Te(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),l=o>=To?10:o>=Yo?5:o>=Po?2:1;let s,u,a;return i<0?(a=Math.pow(10,-i)/l,s=Math.round(t*a),u=Math.round(e*a),s/a<t&&++s,u/a>e&&--u,a=-a):(a=Math.pow(10,i)*l,s=Math.round(t/a),u=Math.round(e/a),s*a<t&&++s,u*a>e&&--u),u<s&&.5<=n&&n<2?Te(t,e,n*2):[s,u,a]}function zo(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,l]=r?Te(e,t,n):Te(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(l<0)for(let a=0;a<s;++a)u[a]=(o-a)/-l;else for(let a=0;a<s;++a)u[a]=(o-a)*l;else if(l<0)for(let a=0;a<s;++a)u[a]=(i+a)/-l;else for(let a=0;a<s;++a)u[a]=(i+a)*l;return u}function xn(t,e,n){return e=+e,t=+t,n=+n,Te(t,e,n)[2]}function Do(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?xn(e,t,n):xn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ke(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function an(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function qo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Lo(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var Fo={value:()=>{}};function Bn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ce(n)}function Ce(t){this._=t}function Ho(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ce.prototype=Bn.prototype={constructor:Ce,on:function(t,e){var n=this._,r=Ho(t+"",n),i,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((i=(t=r[o]).type)&&(i=jo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(i=(t=r[o]).type)n[i]=or(n[i],t.name,e);else if(e==null)for(i in n)n[i]=or(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ce(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function jo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function or(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Fo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var bn="http://www.w3.org/1999/xhtml";const lr={svg:"http://www.w3.org/2000/svg",xhtml:bn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),lr.hasOwnProperty(e)?{space:lr[e],local:t}:t}function Vo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===bn&&e.documentElement.namespaceURI===bn?e.createElement(t):e.createElementNS(n,t)}}function Go(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yi(t){var e=tn(t);return(e.local?Go:Vo)(e)}function Jo(){}function Tn(t){return t==null?Jo:function(){return this.querySelector(t)}}function Ko(t){typeof t!="function"&&(t=Tn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,s=r[i]=new Array(l),u,a,c=0;c<l;++c)(u=o[c])&&(a=t.call(u,u.__data__,c,o))&&("__data__"in u&&(a.__data__=u.__data__),s[c]=a);return new ut(r,this._parents)}function vi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Uo(){return[]}function wi(t){return t==null?Uo:function(){return this.querySelectorAll(t)}}function Qo(t){return function(){return vi(t.apply(this,arguments))}}function Zo(t){typeof t=="function"?t=Qo(t):t=wi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var l=e[o],s=l.length,u,a=0;a<s;++a)(u=l[a])&&(r.push(t.call(u,u.__data__,a,l)),i.push(u));return new ut(r,i)}function xi(t){return function(){return this.matches(t)}}function bi(t){return function(e){return e.matches(t)}}var Wo=Array.prototype.find;function tl(t){return function(){return Wo.call(this.children,t)}}function el(){return this.firstElementChild}function nl(t){return this.select(t==null?el:tl(typeof t=="function"?t:bi(t)))}var rl=Array.prototype.filter;function il(){return Array.from(this.children)}function ol(t){return function(){return rl.call(this.children,t)}}function ll(t){return this.selectAll(t==null?il:ol(typeof t=="function"?t:bi(t)))}function sl(t){typeof t!="function"&&(t=xi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,s=r[i]=[],u,a=0;a<l;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&s.push(u);return new ut(r,this._parents)}function ki(t){return new Array(t.length)}function al(){return new ut(this._enter||this._groups.map(ki),this._parents)}function Ye(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ye.prototype={constructor:Ye,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ul(t){return function(){return t}}function cl(t,e,n,r,i,o){for(var l=0,s,u=e.length,a=o.length;l<a;++l)(s=e[l])?(s.__data__=o[l],r[l]=s):n[l]=new Ye(t,o[l]);for(;l<u;++l)(s=e[l])&&(i[l]=s)}function fl(t,e,n,r,i,o,l){var s,u,a=new Map,c=e.length,h=o.length,f=new Array(c),g;for(s=0;s<c;++s)(u=e[s])&&(f[s]=g=l.call(u,u.__data__,s,e)+"",a.has(g)?i[s]=u:a.set(g,u));for(s=0;s<h;++s)g=l.call(t,o[s],s,o)+"",(u=a.get(g))?(r[s]=u,u.__data__=o[s],a.delete(g)):n[s]=new Ye(t,o[s]);for(s=0;s<c;++s)(u=e[s])&&a.get(f[s])===u&&(i[s]=u)}function hl(t){return t.__data__}function dl(t,e){if(!arguments.length)return Array.from(this,hl);var n=e?fl:cl,r=this._parents,i=this._groups;typeof t!="function"&&(t=ul(t));for(var o=i.length,l=new Array(o),s=new Array(o),u=new Array(o),a=0;a<o;++a){var c=r[a],h=i[a],f=h.length,g=gl(t.call(c,c&&c.__data__,a,r)),v=g.length,y=s[a]=new Array(v),p=l[a]=new Array(v),w=u[a]=new Array(f);n(c,h,y,p,w,g,e);for(var d=0,_=0,m,x;d<v;++d)if(m=y[d]){for(d>=_&&(_=d+1);!(x=p[_])&&++_<v;);m._next=x||null}}return l=new ut(l,r),l._enter=s,l._exit=u,l}function gl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pl(){return new ut(this._exit||this._groups.map(ki),this._parents)}function ml(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function _l(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,l=Math.min(i,o),s=new Array(i),u=0;u<l;++u)for(var a=n[u],c=r[u],h=a.length,f=s[u]=new Array(h),g,v=0;v<h;++v)(g=a[v]||c[v])&&(f[v]=g);for(;u<i;++u)s[u]=n[u];return new ut(s,this._parents)}function yl(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],l;--i>=0;)(l=r[i])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function vl(t){t||(t=wl);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var l=n[o],s=l.length,u=i[o]=new Array(s),a,c=0;c<s;++c)(a=l[c])&&(u[c]=a);u.sort(e)}return new ut(i,this._parents).order()}function wl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bl(){return Array.from(this)}function kl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var l=r[i];if(l)return l}return null}function Ml(){let t=0;for(const e of this)++t;return t}function Al(){return!this.node()}function Nl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,l=i.length,s;o<l;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function El(t){return function(){this.removeAttribute(t)}}function Sl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $l(t,e){return function(){this.setAttribute(t,e)}}function Ol(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Il(t,e){var n=tn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Sl:El:typeof e=="function"?n.local?Cl:Xl:n.local?Ol:$l)(n,e))}function Mi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rl(t){return function(){this.style.removeProperty(t)}}function Bl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Tl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Yl(t,e,n){return arguments.length>1?this.each((e==null?Rl:typeof e=="function"?Tl:Bl)(t,e,n??"")):ne(this.node(),t)}function ne(t,e){return t.style.getPropertyValue(e)||Mi(t).getComputedStyle(t,null).getPropertyValue(e)}function Pl(t){return function(){delete this[t]}}function zl(t,e){return function(){this[t]=e}}function Dl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ql(t,e){return arguments.length>1?this.each((e==null?Pl:typeof e=="function"?Dl:zl)(t,e)):this.node()[t]}function Ai(t){return t.trim().split(/^|\s+/)}function Yn(t){return t.classList||new Ni(t)}function Ni(t){this._node=t,this._names=Ai(t.getAttribute("class")||"")}Ni.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ei(t,e){for(var n=Yn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Si(t,e){for(var n=Yn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ll(t){return function(){Ei(this,t)}}function Fl(t){return function(){Si(this,t)}}function Hl(t,e){return function(){(e.apply(this,arguments)?Ei:Si)(this,t)}}function jl(t,e){var n=Ai(t+"");if(arguments.length<2){for(var r=Yn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Hl:e?Ll:Fl)(n,e))}function Vl(){this.textContent=""}function Gl(t){return function(){this.textContent=t}}function Jl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Kl(t){return arguments.length?this.each(t==null?Vl:(typeof t=="function"?Jl:Gl)(t)):this.node().textContent}function Ul(){this.innerHTML=""}function Ql(t){return function(){this.innerHTML=t}}function Zl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Wl(t){return arguments.length?this.each(t==null?Ul:(typeof t=="function"?Zl:Ql)(t)):this.node().innerHTML}function ts(){this.nextSibling&&this.parentNode.appendChild(this)}function es(){return this.each(ts)}function ns(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rs(){return this.each(ns)}function is(t){var e=typeof t=="function"?t:yi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function os(){return null}function ls(t,e){var n=typeof t=="function"?t:yi(t),r=e==null?os:typeof e=="function"?e:Tn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ss(){var t=this.parentNode;t&&t.removeChild(this)}function as(){return this.each(ss)}function us(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fs(t){return this.select(t?cs:us)}function hs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ds(t){return function(e){t.call(this,e,this.__data__)}}function gs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ps(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ms(t,e,n){return function(){var r=this.__on,i,o=ds(e);if(r){for(var l=0,s=r.length;l<s;++l)if((i=r[l]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function _s(t,e,n){var r=gs(t+""),i,o=r.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,a=s.length,c;u<a;++u)for(i=0,c=s[u];i<o;++i)if((l=r[i]).type===c.type&&l.name===c.name)return c.value}return}for(s=e?ms:ps,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function $i(t,e,n){var r=Mi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ys(t,e){return function(){return $i(this,t,e)}}function vs(t,e){return function(){return $i(this,t,e.apply(this,arguments))}}function ws(t,e){return this.each((typeof e=="function"?vs:ys)(t,e))}function*xs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,l;i<o;++i)(l=r[i])&&(yield l)}var Pn=[null];function ut(t,e){this._groups=t,this._parents=e}function xe(){return new ut([[document.documentElement]],Pn)}function bs(){return this}ut.prototype=xe.prototype={constructor:ut,select:Ko,selectAll:Zo,selectChild:nl,selectChildren:ll,filter:sl,data:dl,enter:al,exit:pl,join:ml,merge:_l,selection:bs,order:yl,sort:vl,call:xl,nodes:bl,node:kl,size:Ml,empty:Al,each:Nl,attr:Il,style:Yl,property:ql,classed:jl,text:Kl,html:Wl,raise:es,lower:rs,append:is,insert:ls,remove:as,clone:fs,datum:hs,on:_s,dispatch:ws,[Symbol.iterator]:xs};function F(t){return typeof t=="string"?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],Pn)}function it(t){return typeof t=="string"?new ut([document.querySelectorAll(t)],[document.documentElement]):new ut([vi(t)],Pn)}function zn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function be(){}var me=.7,Pe=1/me,te="\\s*([+-]?\\d+)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ks=/^#([0-9a-f]{3,8})$/,Ms=new RegExp(`^rgb\\(${te},${te},${te}\\)$`),As=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),Ns=new RegExp(`^rgba\\(${te},${te},${te},${_e}\\)$`),Es=new RegExp(`^rgba\\(${At},${At},${At},${_e}\\)$`),Ss=new RegExp(`^hsl\\(${_e},${At},${At}\\)$`),$s=new RegExp(`^hsla\\(${_e},${At},${At},${_e}\\)$`),sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zn(be,Vt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ar,formatHex:ar,formatHex8:Os,formatHsl:Xs,formatRgb:ur,toString:ur});function ar(){return this.rgb().formatHex()}function Os(){return this.rgb().formatHex8()}function Xs(){return Xi(this).formatHsl()}function ur(){return this.rgb().formatRgb()}function Vt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ks.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cr(e):n===3?new dt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Me(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Me(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ms.exec(t))?new dt(e[1],e[2],e[3],1):(e=As.exec(t))?new dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ns.exec(t))?Me(e[1],e[2],e[3],e[4]):(e=Es.exec(t))?Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ss.exec(t))?dr(e[1],e[2]/100,e[3]/100,1):(e=$s.exec(t))?dr(e[1],e[2]/100,e[3]/100,e[4]):sr.hasOwnProperty(t)?cr(sr[t]):t==="transparent"?new dt(NaN,NaN,NaN,0):null}function cr(t){return new dt(t>>16&255,t>>8&255,t&255,1)}function Me(t,e,n,r){return r<=0&&(t=e=n=NaN),new dt(t,e,n,r)}function Cs(t){return t instanceof be||(t=Vt(t)),t?(t=t.rgb(),new dt(t.r,t.g,t.b,t.opacity)):new dt}function ze(t,e,n,r){return arguments.length===1?Cs(t):new dt(t,e,n,r??1)}function dt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}zn(dt,ze,Oi(be,{brighter(t){return t=t==null?Pe:Math.pow(Pe,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?me:Math.pow(me,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dt(Ht(this.r),Ht(this.g),Ht(this.b),De(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fr,formatHex:fr,formatHex8:Is,formatRgb:hr,toString:hr}));function fr(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}`}function Is(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}${Ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function hr(){const t=De(this.opacity);return`${t===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${t===1?")":`, ${t})`}`}function De(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ht(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ft(t){return t=Ht(t),(t<16?"0":"")+t.toString(16)}function dr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bt(t,e,n,r)}function Xi(t){if(t instanceof bt)return new bt(t.h,t.s,t.l,t.opacity);if(t instanceof be||(t=Vt(t)),!t)return new bt;if(t instanceof bt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,s=o-i,u=(o+i)/2;return s?(e===o?l=(n-r)/s+(n<r)*6:n===o?l=(r-e)/s+2:l=(e-n)/s+4,s/=u<.5?o+i:2-o-i,l*=60):s=u>0&&u<1?0:l,new bt(l,s,u,t.opacity)}function Rs(t,e,n,r){return arguments.length===1?Xi(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}zn(bt,Rs,Oi(be,{brighter(t){return t=t==null?Pe:Math.pow(Pe,t),new bt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?me:Math.pow(me,t),new bt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dt(un(t>=240?t-240:t+120,i,r),un(t,i,r),un(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new bt(gr(this.h),Ae(this.s),Ae(this.l),De(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=De(this.opacity);return`${t===1?"hsl(":"hsla("}${gr(this.h)}, ${Ae(this.s)*100}%, ${Ae(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gr(t){return t=(t||0)%360,t<0?t+360:t}function Ae(t){return Math.max(0,Math.min(1,t||0))}function un(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Bs(t,e,n,r,i){var o=t*t,l=o*t;return((1-3*t+3*o-l)*e+(4-6*o+3*l)*n+(1+3*t+3*o-3*l)*r+l*i)/6}function Ts(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],l=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Bs((n-r/e)*e,l,i,o,s)}}const Dn=t=>()=>t;function Ys(t,e){return function(n){return t+n*e}}function Ps(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function zs(t){return(t=+t)==1?Ci:function(e,n){return n-e?Ps(e,n,t):Dn(isNaN(e)?n:e)}}function Ci(t,e){var n=e-t;return n?Ys(t,n):Dn(isNaN(t)?e:t)}const qe=function t(e){var n=zs(e);function r(i,o){var l=n((i=ze(i)).r,(o=ze(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),a=Ci(i.opacity,o.opacity);return function(c){return i.r=l(c),i.g=s(c),i.b=u(c),i.opacity=a(c),i+""}}return r.gamma=t,r}(1);function Ds(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),l,s;for(l=0;l<n;++l)s=ze(e[l]),r[l]=s.r||0,i[l]=s.g||0,o[l]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=o(u),s+""}}}var qs=Ds(Ts);function Ls(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Fs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hs(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)i[l]=en(t[l],e[l]);for(;l<n;++l)o[l]=e[l];return function(s){for(l=0;l<r;++l)o[l]=i[l](s);return o}}function js(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function xt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vs(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=en(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cn=new RegExp(kn.source,"g");function Gs(t){return function(){return t}}function Js(t){return function(e){return t(e)+""}}function Ii(t,e){var n=kn.lastIndex=cn.lastIndex=0,r,i,o,l=-1,s=[],u=[];for(t=t+"",e=e+"";(r=kn.exec(t))&&(i=cn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[l]?s[l]+=o:s[++l]=o),(r=r[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,u.push({i:l,x:xt(r,i)})),n=cn.lastIndex;return n<e.length&&(o=e.slice(n),s[l]?s[l]+=o:s[++l]=o),s.length<2?u[0]?Js(u[0].x):Gs(e):(e=u.length,function(a){for(var c=0,h;c<e;++c)s[(h=u[c]).i]=h.x(a);return s.join("")})}function en(t,e){var n=typeof e,r;return e==null||n==="boolean"?Dn(e):(n==="number"?xt:n==="string"?(r=Vt(e))?(e=r,qe):Ii:e instanceof Vt?qe:e instanceof Date?js:Fs(e)?Ls:Array.isArray(e)?Hs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vs:xt)(t,e)}function Ri(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var pr=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bi(t,e,n,r,i,o){var l,s,u;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,l=-l),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*pr,skewX:Math.atan(u)*pr,scaleX:l,scaleY:s}}var Ne;function Ks(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mn:Bi(e.a,e.b,e.c,e.d,e.e,e.f)}function Us(t){return t==null||(Ne||(Ne=document.createElementNS("http://www.w3.org/2000/svg","g")),Ne.setAttribute("transform",t),!(t=Ne.transform.baseVal.consolidate()))?Mn:(t=t.matrix,Bi(t.a,t.b,t.c,t.d,t.e,t.f))}function Ti(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,c,h,f,g,v){if(a!==h||c!==f){var y=g.push("translate(",null,e,null,n);v.push({i:y-4,x:xt(a,h)},{i:y-2,x:xt(c,f)})}else(h||f)&&g.push("translate("+h+e+f+n)}function l(a,c,h,f){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:xt(a,c)})):c&&h.push(i(h)+"rotate("+c+r)}function s(a,c,h,f){a!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:xt(a,c)}):c&&h.push(i(h)+"skewX("+c+r)}function u(a,c,h,f,g,v){if(a!==h||c!==f){var y=g.push(i(g)+"scale(",null,",",null,")");v.push({i:y-4,x:xt(a,h)},{i:y-2,x:xt(c,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(a,c){var h=[],f=[];return a=t(a),c=t(c),o(a.translateX,a.translateY,c.translateX,c.translateY,h,f),l(a.rotate,c.rotate,h,f),s(a.skewX,c.skewX,h,f),u(a.scaleX,a.scaleY,c.scaleX,c.scaleY,h,f),a=c=null,function(g){for(var v=-1,y=f.length,p;++v<y;)h[(p=f[v]).i]=p.x(g);return h.join("")}}}var Qs=Ti(Ks,"px, ","px)","deg)"),Zs=Ti(Us,", ",")",")"),re=0,ce=0,se=0,Yi=1e3,Le,fe,Fe=0,Gt=0,nn=0,ye=typeof performance=="object"&&performance.now?performance:Date,Pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qn(){return Gt||(Pi(Ws),Gt=ye.now()+nn)}function Ws(){Gt=0}function He(){this._call=this._time=this._next=null}He.prototype=Ln.prototype={constructor:He,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?qn():+n)+(e==null?0:+e),!this._next&&fe!==this&&(fe?fe._next=this:Le=this,fe=this),this._call=t,this._time=n,An()},stop:function(){this._call&&(this._call=null,this._time=1/0,An())}};function Ln(t,e,n){var r=new He;return r.restart(t,e,n),r}function ta(){qn(),++re;for(var t=Le,e;t;)(e=Gt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--re}function mr(){Gt=(Fe=ye.now())+nn,re=ce=0;try{ta()}finally{re=0,na(),Gt=0}}function ea(){var t=ye.now(),e=t-Fe;e>Yi&&(nn-=e,Fe=t)}function na(){for(var t,e=Le,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Le=n);fe=t,An(r)}function An(t){if(!re){ce&&(ce=clearTimeout(ce));var e=t-Gt;e>24?(t<1/0&&(ce=setTimeout(mr,t-ye.now()-nn)),se&&(se=clearInterval(se))):(se||(Fe=ye.now(),se=setInterval(ea,Yi)),re=1,Pi(mr))}}function _r(t,e,n){var r=new He;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ra=Bn("start","end","cancel","interrupt"),ia=[],zi=0,yr=1,Nn=2,Ie=3,vr=4,En=5,Re=6;function rn(t,e,n,r,i,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;oa(t,n,{name:e,index:r,group:i,on:ra,tween:ia,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zi})}function Fn(t,e){var n=kt(t,e);if(n.state>zi)throw new Error("too late; already scheduled");return n}function Nt(t,e){var n=kt(t,e);if(n.state>Ie)throw new Error("too late; already running");return n}function kt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function oa(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ln(o,0,n.time);function o(a){n.state=yr,n.timer.restart(l,n.delay,n.time),n.delay<=a&&l(a-n.delay)}function l(a){var c,h,f,g;if(n.state!==yr)return u();for(c in r)if(g=r[c],g.name===n.name){if(g.state===Ie)return _r(l);g.state===vr?(g.state=Re,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[c]):+c<e&&(g.state=Re,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[c])}if(_r(function(){n.state===Ie&&(n.state=vr,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=Nn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Nn){for(n.state=Ie,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function s(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=En,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===En&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Re,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function la(t,e){var n=t.__transition,r,i,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}i=r.state>Nn&&r.state<En,r.state=Re,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function sa(t){return this.each(function(){la(this,t)})}function aa(t,e){var n,r;return function(){var i=Nt(this,t),o=i.tween;if(o!==n){r=n=o;for(var l=0,s=r.length;l<s;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function ua(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Nt(this,t),l=o.tween;if(l!==r){i=(r=l).slice();for(var s={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=s;break}u===a&&i.push(s)}o.tween=i}}function ca(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=kt(this.node(),n).tween,i=0,o=r.length,l;i<o;++i)if((l=r[i]).name===t)return l.value;return null}return this.each((e==null?aa:ua)(n,t,e))}function Hn(t,e,n){var r=t._id;return t.each(function(){var i=Nt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return kt(i,r).value[e]}}function Di(t,e){var n;return(typeof e=="number"?xt:e instanceof Vt?qe:(n=Vt(e))?(e=n,qe):Ii)(t,e)}function fa(t){return function(){this.removeAttribute(t)}}function ha(t){return function(){this.removeAttributeNS(t.space,t.local)}}function da(t,e,n){var r,i=n+"",o;return function(){var l=this.getAttribute(t);return l===i?null:l===r?o:o=e(r=l,n)}}function ga(t,e,n){var r,i=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===i?null:l===r?o:o=e(r=l,n)}}function pa(t,e,n){var r,i,o;return function(){var l,s=n(this),u;return s==null?void this.removeAttribute(t):(l=this.getAttribute(t),u=s+"",l===u?null:l===r&&u===i?o:(i=u,o=e(r=l,s)))}}function ma(t,e,n){var r,i,o;return function(){var l,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),u=s+"",l===u?null:l===r&&u===i?o:(i=u,o=e(r=l,s)))}}function _a(t,e){var n=tn(t),r=n==="transform"?Zs:Di;return this.attrTween(t,typeof e=="function"?(n.local?ma:pa)(n,r,Hn(this,"attr."+t,e)):e==null?(n.local?ha:fa)(n):(n.local?ga:da)(n,r,e))}function ya(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function va(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&va(t,o)),n}return i._value=e,i}function xa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ya(t,o)),n}return i._value=e,i}function ba(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=tn(t);return this.tween(n,(r.local?wa:xa)(r,e))}function ka(t,e){return function(){Fn(this,t).delay=+e.apply(this,arguments)}}function Ma(t,e){return e=+e,function(){Fn(this,t).delay=e}}function Aa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ka:Ma)(e,t)):kt(this.node(),e).delay}function Na(t,e){return function(){Nt(this,t).duration=+e.apply(this,arguments)}}function Ea(t,e){return e=+e,function(){Nt(this,t).duration=e}}function Sa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Na:Ea)(e,t)):kt(this.node(),e).duration}function $a(t,e){if(typeof e!="function")throw new Error;return function(){Nt(this,t).ease=e}}function Oa(t){var e=this._id;return arguments.length?this.each($a(e,t)):kt(this.node(),e).ease}function Xa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Nt(this,t).ease=n}}function Ca(t){if(typeof t!="function")throw new Error;return this.each(Xa(this._id,t))}function Ia(t){typeof t!="function"&&(t=xi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],l=o.length,s=r[i]=[],u,a=0;a<l;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&s.push(u);return new $t(r,this._parents,this._name,this._id)}function Ra(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),l=new Array(r),s=0;s<o;++s)for(var u=e[s],a=n[s],c=u.length,h=l[s]=new Array(c),f,g=0;g<c;++g)(f=u[g]||a[g])&&(h[g]=f);for(;s<r;++s)l[s]=e[s];return new $t(l,this._parents,this._name,this._id)}function Ba(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ta(t,e,n){var r,i,o=Ba(e)?Fn:Nt;return function(){var l=o(this,t),s=l.on;s!==r&&(i=(r=s).copy()).on(e,n),l.on=i}}function Ya(t,e){var n=this._id;return arguments.length<2?kt(this.node(),n).on.on(t):this.each(Ta(n,t,e))}function Pa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function za(){return this.on("end.remove",Pa(this._id))}function Da(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Tn(t));for(var r=this._groups,i=r.length,o=new Array(i),l=0;l<i;++l)for(var s=r[l],u=s.length,a=o[l]=new Array(u),c,h,f=0;f<u;++f)(c=s[f])&&(h=t.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),a[f]=h,rn(a[f],e,n,f,a,kt(c,n)));return new $t(o,this._parents,e,n)}function qa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wi(t));for(var r=this._groups,i=r.length,o=[],l=[],s=0;s<i;++s)for(var u=r[s],a=u.length,c,h=0;h<a;++h)if(c=u[h]){for(var f=t.call(c,c.__data__,h,u),g,v=kt(c,n),y=0,p=f.length;y<p;++y)(g=f[y])&&rn(g,e,n,y,f,v);o.push(f),l.push(c)}return new $t(o,l,e,n)}var La=xe.prototype.constructor;function Fa(){return new La(this._groups,this._parents)}function Ha(t,e){var n,r,i;return function(){var o=ne(this,t),l=(this.style.removeProperty(t),ne(this,t));return o===l?null:o===n&&l===r?i:i=e(n=o,r=l)}}function qi(t){return function(){this.style.removeProperty(t)}}function ja(t,e,n){var r,i=n+"",o;return function(){var l=ne(this,t);return l===i?null:l===r?o:o=e(r=l,n)}}function Va(t,e,n){var r,i,o;return function(){var l=ne(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),ne(this,t))),l===u?null:l===r&&u===i?o:(i=u,o=e(r=l,s))}}function Ga(t,e){var n,r,i,o="style."+e,l="end."+o,s;return function(){var u=Nt(this,t),a=u.on,c=u.value[o]==null?s||(s=qi(e)):void 0;(a!==n||i!==c)&&(r=(n=a).copy()).on(l,i=c),u.on=r}}function Ja(t,e,n){var r=(t+="")=="transform"?Qs:Di;return e==null?this.styleTween(t,Ha(t,r)).on("end.style."+t,qi(t)):typeof e=="function"?this.styleTween(t,Va(t,r,Hn(this,"style."+t,e))).each(Ga(this._id,t)):this.styleTween(t,ja(t,r,e),n).on("end.style."+t,null)}function Ka(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ua(t,e,n){var r,i;function o(){var l=e.apply(this,arguments);return l!==i&&(r=(i=l)&&Ka(t,l,n)),r}return o._value=e,o}function Qa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ua(t,e,n??""))}function Za(t){return function(){this.textContent=t}}function Wa(t){return function(){var e=t(this);this.textContent=e??""}}function tu(t){return this.tween("text",typeof t=="function"?Wa(Hn(this,"text",t)):Za(t==null?"":t+""))}function eu(t){return function(e){this.textContent=t.call(this,e)}}function nu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&eu(i)),e}return r._value=t,r}function ru(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,nu(t))}function iu(){for(var t=this._name,e=this._id,n=Li(),r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,u,a=0;a<s;++a)if(u=l[a]){var c=kt(u,e);rn(u,t,n,a,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $t(r,this._parents,t,n)}function ou(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,l){var s={value:l},u={value:function(){--i===0&&o()}};n.each(function(){var a=Nt(this,r),c=a.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),a.on=e}),i===0&&o()})}var lu=0;function $t(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Li(){return++lu}var Et=xe.prototype;$t.prototype={constructor:$t,select:Da,selectAll:qa,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:Ia,merge:Ra,selection:Fa,transition:iu,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:Ya,attr:_a,attrTween:ba,style:Ja,styleTween:Qa,text:tu,textTween:ru,remove:za,tween:ca,delay:Aa,duration:Sa,ease:Oa,easeVarying:Ca,end:ou,[Symbol.iterator]:Et[Symbol.iterator]};function su(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var au={time:null,delay:0,duration:250,ease:su};function uu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function cu(t){var e,n;t instanceof $t?(e=t._id,t=t._name):(e=Li(),(n=au).time=qn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var l=r[o],s=l.length,u,a=0;a<s;++a)(u=l[a])&&rn(u,t,e,a,l,n||uu(u,e));return new $t(r,this._parents,t,e)}xe.prototype.interrupt=sa;xe.prototype.transition=cu;const Sn=Math.PI,$n=2*Sn,zt=1e-6,fu=$n-zt;function Fi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fi;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class jn{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fi:hu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+l}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,s=this._y1,u=r-e,a=i-n,c=l-e,h=s-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>zt)if(!(Math.abs(h*u-a*c)>zt)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-l,v=i-s,y=u*u+a*a,p=g*g+v*v,w=Math.sqrt(y),d=Math.sqrt(f),_=o*Math.tan((Sn-Math.acos((y+f-p)/(2*w*d)))/2),m=_/d,x=_/w;Math.abs(m-1)>zt&&this._append`L${e+m*c},${n+m*h}`,this._append`A${o},${o},0,0,${+(h*g>c*v)},${this._x1=e+x*u},${this._y1=n+x*a}`}}arc(e,n,r,i,o,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),a=e+s,c=n+u,h=1^l,f=l?i-o:o-i;this._x1===null?this._append`M${a},${c}`:(Math.abs(this._x1-a)>zt||Math.abs(this._y1-c)>zt)&&this._append`L${a},${c}`,r&&(f<0&&(f=f%$n+$n),f>fu?this._append`A${r},${r},0,1,${h},${e-s},${n-u}A${r},${r},0,1,${h},${this._x1=a},${this._y1=c}`:f>zt&&this._append`A${r},${r},0,${+(f>=Sn)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Hi(){return new jn}Hi.prototype=jn.prototype;function du(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,l=n.length,s,u=0,a=0;for(o=0;o<l;++o)s=n[o],u+=s.x,a+=s.y;for(u=(u/l-t)*r,a=(a/l-e)*r,o=0;o<l;++o)s=n[o],s.x-=u,s.y-=a}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function gu(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ji(this.cover(e,n),e,n,t)}function ji(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,l={data:r},s=t._x0,u=t._y0,a=t._x1,c=t._y1,h,f,g,v,y,p,w,d;if(!o)return t._root=l,t;for(;o.length;)if((y=e>=(h=(s+a)/2))?s=h:a=h,(p=n>=(f=(u+c)/2))?u=f:c=f,i=o,!(o=o[w=p<<1|y]))return i[w]=l,t;if(g=+t._x.call(null,o.data),v=+t._y.call(null,o.data),e===g&&n===v)return l.next=o,i?i[w]=l:t._root=l,t;do i=i?i[w]=new Array(4):t._root=new Array(4),(y=e>=(h=(s+a)/2))?s=h:a=h,(p=n>=(f=(u+c)/2))?u=f:c=f;while((w=p<<1|y)===(d=(v>=f)<<1|g>=h));return i[d]=o,i[w]=l,t}function pu(t){var e,n,r=t.length,i,o,l=new Array(r),s=new Array(r),u=1/0,a=1/0,c=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(l[n]=i,s[n]=o,i<u&&(u=i),i>c&&(c=i),o<a&&(a=o),o>h&&(h=o));if(u>c||a>h)return this;for(this.cover(u,a).cover(c,h),n=0;n<r;++n)ji(this,l[n],s[n],t[n]);return this}function mu(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var l=i-n||1,s=this._root,u,a;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,u=new Array(4),u[a]=s,s=u,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function _u(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function yu(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function vu(t,e,n){var r,i=this._x0,o=this._y0,l,s,u,a,c=this._x1,h=this._y1,f=[],g=this._root,v,y;for(g&&f.push(new lt(g,i,o,c,h)),n==null?n=1/0:(i=t-n,o=e-n,c=t+n,h=e+n,n*=n);v=f.pop();)if(!(!(g=v.node)||(l=v.x0)>c||(s=v.y0)>h||(u=v.x1)<i||(a=v.y1)<o))if(g.length){var p=(l+u)/2,w=(s+a)/2;f.push(new lt(g[3],p,w,u,a),new lt(g[2],l,w,p,a),new lt(g[1],p,s,u,w),new lt(g[0],l,s,p,w)),(y=(e>=w)<<1|t>=p)&&(v=f[f.length-1],f[f.length-1]=f[f.length-1-y],f[f.length-1-y]=v)}else{var d=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),m=d*d+_*_;if(m<n){var x=Math.sqrt(n=m);i=t-x,o=e-x,c=t+x,h=e+x,r=g.data}}return r}function wu(t){if(isNaN(c=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,l=this._x0,s=this._y0,u=this._x1,a=this._y1,c,h,f,g,v,y,p,w;if(!n)return this;if(n.length)for(;;){if((v=c>=(f=(l+u)/2))?l=f:u=f,(y=h>=(g=(s+a)/2))?s=g:a=g,e=n,!(n=n[p=y<<1|v]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,w=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[p]=o:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=o,this)}function xu(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function bu(){return this._root}function ku(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Mu(t){var e=[],n,r=this._root,i,o,l,s,u;for(r&&e.push(new lt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,l=n.y0,s=n.x1,u=n.y1)&&r.length){var a=(o+s)/2,c=(l+u)/2;(i=r[3])&&e.push(new lt(i,a,c,s,u)),(i=r[2])&&e.push(new lt(i,o,c,a,u)),(i=r[1])&&e.push(new lt(i,a,l,s,c)),(i=r[0])&&e.push(new lt(i,o,l,a,c))}return this}function Au(t){var e=[],n=[],r;for(this._root&&e.push(new lt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,l=r.x0,s=r.y0,u=r.x1,a=r.y1,c=(l+u)/2,h=(s+a)/2;(o=i[0])&&e.push(new lt(o,l,s,c,h)),(o=i[1])&&e.push(new lt(o,c,s,u,h)),(o=i[2])&&e.push(new lt(o,l,h,c,a)),(o=i[3])&&e.push(new lt(o,c,h,u,a))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Nu(t){return t[0]}function Eu(t){return arguments.length?(this._x=t,this):this._x}function Su(t){return t[1]}function $u(t){return arguments.length?(this._y=t,this):this._y}function Vn(t,e,n){var r=new Gn(e??Nu,n??Su,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Gn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function wr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ct=Vn.prototype=Gn.prototype;ct.copy=function(){var t=new Gn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=wr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=wr(r));return t};ct.add=gu;ct.addAll=pu;ct.cover=mu;ct.data=_u;ct.extent=yu;ct.find=vu;ct.remove=wu;ct.removeAll=xu;ct.root=bu;ct.size=ku;ct.visit=Mu;ct.visitAfter=Au;ct.x=Eu;ct.y=$u;function st(t){return function(){return t}}function Bt(t){return(t()-.5)*1e-6}function Ou(t){return t.x+t.vx}function Xu(t){return t.y+t.vy}function Vi(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=st(t==null?1:+t));function l(){for(var a,c=e.length,h,f,g,v,y,p,w=0;w<o;++w)for(h=Vn(e,Ou,Xu).visitAfter(s),a=0;a<c;++a)f=e[a],y=n[f.index],p=y*y,g=f.x+f.vx,v=f.y+f.vy,h.visit(d);function d(_,m,x,b,A){var k=_.data,E=_.r,S=y+E;if(k){if(k.index>f.index){var N=g-k.x-k.vx,C=v-k.y-k.vy,M=N*N+C*C;M<S*S&&(N===0&&(N=Bt(r),M+=N*N),C===0&&(C=Bt(r),M+=C*C),M=(S-(M=Math.sqrt(M)))/M*i,f.vx+=(N*=M)*(S=(E*=E)/(p+E)),f.vy+=(C*=M)*S,k.vx-=N*(S=1-S),k.vy-=C*S)}return}return m>g+S||b<g-S||x>v+S||A<v-S}}function s(a){if(a.data)return a.r=n[a.data.index];for(var c=a.r=0;c<4;++c)a[c]&&a[c].r>a.r&&(a.r=a[c].r)}function u(){if(e){var a,c=e.length,h;for(n=new Array(c),a=0;a<c;++a)h=e[a],n[h.index]=+t(h,a,e)}}return l.initialize=function(a,c){e=a,r=c,u()},l.iterations=function(a){return arguments.length?(o=+a,l):o},l.strength=function(a){return arguments.length?(i=+a,l):i},l.radius=function(a){return arguments.length?(t=typeof a=="function"?a:st(+a),u(),l):t},l}function Cu(t){return t.index}function xr(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Iu(t){var e=Cu,n=h,r,i=st(30),o,l,s,u,a,c=1;t==null&&(t=[]);function h(p){return 1/Math.min(s[p.source.index],s[p.target.index])}function f(p){for(var w=0,d=t.length;w<c;++w)for(var _=0,m,x,b,A,k,E,S;_<d;++_)m=t[_],x=m.source,b=m.target,A=b.x+b.vx-x.x-x.vx||Bt(a),k=b.y+b.vy-x.y-x.vy||Bt(a),E=Math.sqrt(A*A+k*k),E=(E-o[_])/E*p*r[_],A*=E,k*=E,b.vx-=A*(S=u[_]),b.vy-=k*S,x.vx+=A*(S=1-S),x.vy+=k*S}function g(){if(l){var p,w=l.length,d=t.length,_=new Map(l.map((x,b)=>[e(x,b,l),x])),m;for(p=0,s=new Array(w);p<d;++p)m=t[p],m.index=p,typeof m.source!="object"&&(m.source=xr(_,m.source)),typeof m.target!="object"&&(m.target=xr(_,m.target)),s[m.source.index]=(s[m.source.index]||0)+1,s[m.target.index]=(s[m.target.index]||0)+1;for(p=0,u=new Array(d);p<d;++p)m=t[p],u[p]=s[m.source.index]/(s[m.source.index]+s[m.target.index]);r=new Array(d),v(),o=new Array(d),y()}}function v(){if(l)for(var p=0,w=t.length;p<w;++p)r[p]=+n(t[p],p,t)}function y(){if(l)for(var p=0,w=t.length;p<w;++p)o[p]=+i(t[p],p,t)}return f.initialize=function(p,w){l=p,a=w,g()},f.links=function(p){return arguments.length?(t=p,g(),f):t},f.id=function(p){return arguments.length?(e=p,f):e},f.iterations=function(p){return arguments.length?(c=+p,f):c},f.strength=function(p){return arguments.length?(n=typeof p=="function"?p:st(+p),v(),f):n},f.distance=function(p){return arguments.length?(i=typeof p=="function"?p:st(+p),y(),f):i},f}const Ru=1664525,Bu=1013904223,br=4294967296;function Tu(){let t=1;return()=>(t=(Ru*t+Bu)%br)/br}function Yu(t){return t.x}function Pu(t){return t.y}var zu=10,Du=Math.PI*(3-Math.sqrt(5));function Gi(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,l=.6,s=new Map,u=Ln(h),a=Bn("tick","end"),c=Tu();t==null&&(t=[]);function h(){f(),a.call("tick",e),n<r&&(u.stop(),a.call("end",e))}function f(y){var p,w=t.length,d;y===void 0&&(y=1);for(var _=0;_<y;++_)for(n+=(o-n)*i,s.forEach(function(m){m(n)}),p=0;p<w;++p)d=t[p],d.fx==null?d.x+=d.vx*=l:(d.x=d.fx,d.vx=0),d.fy==null?d.y+=d.vy*=l:(d.y=d.fy,d.vy=0);return e}function g(){for(var y=0,p=t.length,w;y<p;++y){if(w=t[y],w.index=y,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var d=zu*Math.sqrt(.5+y),_=y*Du;w.x=d*Math.cos(_),w.y=d*Math.sin(_)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function v(y){return y.initialize&&y.initialize(t,c),y}return g(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(y){return arguments.length?(t=y,g(),s.forEach(v),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(o=+y,e):o},velocityDecay:function(y){return arguments.length?(l=1-y,e):1-l},randomSource:function(y){return arguments.length?(c=y,s.forEach(v),e):c},force:function(y,p){return arguments.length>1?(p==null?s.delete(y):s.set(y,v(p)),e):s.get(y)},find:function(y,p,w){var d=0,_=t.length,m,x,b,A,k;for(w==null?w=1/0:w*=w,d=0;d<_;++d)A=t[d],m=y-A.x,x=p-A.y,b=m*m+x*x,b<w&&(k=A,w=b);return k},on:function(y,p){return arguments.length>1?(a.on(y,p),e):a.on(y)}}}function qu(){var t,e,n,r,i=st(-30),o,l=1,s=1/0,u=.81;function a(g){var v,y=t.length,p=Vn(t,Yu,Pu).visitAfter(h);for(r=g,v=0;v<y;++v)e=t[v],p.visit(f)}function c(){if(t){var g,v=t.length,y;for(o=new Array(v),g=0;g<v;++g)y=t[g],o[y.index]=+i(y,g,t)}}function h(g){var v=0,y,p,w=0,d,_,m;if(g.length){for(d=_=m=0;m<4;++m)(y=g[m])&&(p=Math.abs(y.value))&&(v+=y.value,w+=p,d+=p*y.x,_+=p*y.y);g.x=d/w,g.y=_/w}else{y=g,y.x=y.data.x,y.y=y.data.y;do v+=o[y.data.index];while(y=y.next)}g.value=v}function f(g,v,y,p){if(!g.value)return!0;var w=g.x-e.x,d=g.y-e.y,_=p-v,m=w*w+d*d;if(_*_/u<m)return m<s&&(w===0&&(w=Bt(n),m+=w*w),d===0&&(d=Bt(n),m+=d*d),m<l&&(m=Math.sqrt(l*m)),e.vx+=w*g.value*r/m,e.vy+=d*g.value*r/m),!0;if(g.length||m>=s)return;(g.data!==e||g.next)&&(w===0&&(w=Bt(n),m+=w*w),d===0&&(d=Bt(n),m+=d*d),m<l&&(m=Math.sqrt(l*m)));do g.data!==e&&(_=o[g.data.index]*r/m,e.vx+=w*_,e.vy+=d*_);while(g=g.next)}return a.initialize=function(g,v){t=g,n=v,c()},a.strength=function(g){return arguments.length?(i=typeof g=="function"?g:st(+g),c(),a):i},a.distanceMin=function(g){return arguments.length?(l=g*g,a):Math.sqrt(l)},a.distanceMax=function(g){return arguments.length?(s=g*g,a):Math.sqrt(s)},a.theta=function(g){return arguments.length?(u=g*g,a):Math.sqrt(u)},a}function Lu(t){var e=st(.1),n,r,i;typeof t!="function"&&(t=st(t==null?0:+t));function o(s){for(var u=0,a=n.length,c;u<a;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*s}function l(){if(n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,l()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:st(+s),l(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:st(+s),l(),o):t},o}function Fu(t){var e=st(.1),n,r,i;typeof t!="function"&&(t=st(t==null?0:+t));function o(s){for(var u=0,a=n.length,c;u<a;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*s}function l(){if(n){var s,u=n.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,l()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:st(+s),l(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:st(+s),l(),o):t},o}function Hu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function je(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ie(t){return t=je(Math.abs(t)),t?t[1]:NaN}function ju(t,e){return function(n,r){for(var i=n.length,o=[],l=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[l=(l+1)%t.length];return o.reverse().join(e)}}function Vu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Gu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ve(t){if(!(e=Gu.exec(t)))throw new Error("invalid format: "+t);var e;return new Jn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ve.prototype=Jn.prototype;function Jn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Jn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ju(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ji;function Ku(t,e){var n=je(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ji=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+je(t,Math.max(0,e+o-1))[0]}function kr(t,e){var n=je(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kr(t*100,e),r:kr,s:Ku,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ar(t){return t}var Nr=Array.prototype.map,Er=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Uu(t){var e=t.grouping===void 0||t.thousands===void 0?Ar:ju(Nr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ar:Vu(Nr.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function a(h){h=Ve(h);var f=h.fill,g=h.align,v=h.sign,y=h.symbol,p=h.zero,w=h.width,d=h.comma,_=h.precision,m=h.trim,x=h.type;x==="n"?(d=!0,x="g"):Mr[x]||(_===void 0&&(_=12),m=!0,x="g"),(p||f==="0"&&g==="=")&&(p=!0,f="0",g="=");var b=y==="$"?n:y==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",A=y==="$"?r:/[%p]/.test(x)?l:"",k=Mr[x],E=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function S(N){var C=b,M=A,I,Y,$;if(x==="c")M=k(N)+M,N="";else{N=+N;var X=N<0||1/N<0;if(N=isNaN(N)?u:k(Math.abs(N),_),m&&(N=Ju(N)),X&&+N==0&&v!=="+"&&(X=!1),C=(X?v==="("?v:s:v==="-"||v==="("?"":v)+C,M=(x==="s"?Er[8+Ji/3]:"")+M+(X&&v==="("?")":""),E){for(I=-1,Y=N.length;++I<Y;)if($=N.charCodeAt(I),48>$||$>57){M=($===46?i+N.slice(I+1):N.slice(I))+M,N=N.slice(0,I);break}}}d&&!p&&(N=e(N,1/0));var T=C.length+N.length+M.length,q=T<w?new Array(w-T+1).join(f):"";switch(d&&p&&(N=e(q+N,q.length?w-M.length:1/0),q=""),g){case"<":N=C+N+M+q;break;case"=":N=C+q+N+M;break;case"^":N=q.slice(0,T=q.length>>1)+C+N+M+q.slice(T);break;default:N=q+C+N+M;break}return o(N)}return S.toString=function(){return h+""},S}function c(h,f){var g=a((h=Ve(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(ie(f)/3)))*3,y=Math.pow(10,-v),p=Er[8+v/3];return function(w){return g(y*w)+p}}return{format:a,formatPrefix:c}}var Ee,Ki,Ui;Qu({thousands:",",grouping:[3],currency:["$",""]});function Qu(t){return Ee=Uu(t),Ki=Ee.format,Ui=Ee.formatPrefix,Ee}function Zu(t){return Math.max(0,-ie(Math.abs(t)))}function Wu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ie(e)/3)))*3-ie(Math.abs(t)))}function tc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ie(e)-ie(t))+1}function ec(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function nc(){return this.eachAfter(ec)}function rc(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function ic(t,e){for(var n=this,r=[n],i,o,l=-1;n=r.pop();)if(t.call(e,n,++l,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function oc(t,e){for(var n=this,r=[n],i=[],o,l,s,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(l=0,s=o.length;l<s;++l)r.push(o[l]);for(;n=i.pop();)t.call(e,n,++u,this);return this}function lc(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function sc(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function ac(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function uc(t){for(var e=this,n=cc(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function cc(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function fc(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function hc(){return Array.from(this)}function dc(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function gc(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*pc(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Kn(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=yc)):e===void 0&&(e=_c);for(var n=new Ge(t),r,i=[n],o,l,s,u;r=i.pop();)if((l=e(r.data))&&(u=(l=Array.from(l)).length))for(r.children=l,s=u-1;s>=0;--s)i.push(o=l[s]=new Ge(l[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(wc)}function mc(){return Kn(this).eachBefore(vc)}function _c(t){return t.children}function yc(t){return Array.isArray(t)?t[1]:null}function vc(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function wc(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Ge(t){this.data=t,this.depth=this.height=0,this.parent=null}Ge.prototype=Kn.prototype={constructor:Ge,count:nc,each:rc,eachAfter:oc,eachBefore:ic,find:lc,sum:sc,sort:ac,path:uc,ancestors:fc,descendants:hc,leaves:dc,links:gc,copy:mc,[Symbol.iterator]:pc};function xc(t){if(typeof t!="function")throw new Error;return t}function ae(){return 0}function ue(t){return function(){return t}}function bc(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function kc(t,e,n,r,i){for(var o=t.children,l,s=-1,u=o.length,a=t.value&&(r-e)/t.value;++s<u;)l=o[s],l.y0=n,l.y1=i,l.x0=e,l.x1=e+=l.value*a}function Mc(t,e,n,r,i){for(var o=t.children,l,s=-1,u=o.length,a=t.value&&(i-n)/t.value;++s<u;)l=o[s],l.x0=e,l.x1=r,l.y0=n,l.y1=n+=l.value*a}var Ac=(1+Math.sqrt(5))/2;function Nc(t,e,n,r,i,o){for(var l=[],s=e.children,u,a,c=0,h=0,f=s.length,g,v,y=e.value,p,w,d,_,m,x,b;c<f;){g=i-n,v=o-r;do p=s[h++].value;while(!p&&h<f);for(w=d=p,x=Math.max(v/g,g/v)/(y*t),b=p*p*x,m=Math.max(d/b,b/w);h<f;++h){if(p+=a=s[h].value,a<w&&(w=a),a>d&&(d=a),b=p*p*x,_=Math.max(d/b,b/w),_>m){p-=a;break}m=_}l.push(u={value:p,dice:g<v,children:s.slice(c,h)}),u.dice?kc(u,n,r,i,y?r+=v*p/y:o):Mc(u,n,r,y?n+=g*p/y:i,o),y-=p,c=h}return l}const Qi=function t(e){function n(r,i,o,l,s){Nc(e,r,i,o,l,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(Ac);function Ec(){var t=Qi,e=!1,n=1,r=1,i=[0],o=ae,l=ae,s=ae,u=ae,a=ae;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(h),i=[0],e&&f.eachBefore(bc),f}function h(f){var g=i[f.depth],v=f.x0+g,y=f.y0+g,p=f.x1-g,w=f.y1-g;p<v&&(v=p=(v+p)/2),w<y&&(y=w=(y+w)/2),f.x0=v,f.y0=y,f.x1=p,f.y1=w,f.children&&(g=i[f.depth+1]=o(f)/2,v+=a(f)-g,y+=l(f)-g,p-=s(f)-g,w-=u(f)-g,p<v&&(v=p=(v+p)/2),w<y&&(y=w=(y+w)/2),t(f,v,y,p,w))}return c.round=function(f){return arguments.length?(e=!!f,c):e},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(t=xc(f),c):t},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(o=typeof f=="function"?f:ue(+f),c):o},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(l=typeof f=="function"?f:ue(+f),c):l},c.paddingRight=function(f){return arguments.length?(s=typeof f=="function"?f:ue(+f),c):s},c.paddingBottom=function(f){return arguments.length?(u=typeof f=="function"?f:ue(+f),c):u},c.paddingLeft=function(f){return arguments.length?(a=typeof f=="function"?f:ue(+f),c):a},c}function Un(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Sc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Sr=Symbol("implicit");function Qn(){var t=new rr,e=[],n=[],r=Sr;function i(o){let l=t.get(o);if(l===void 0){if(r!==Sr)return r;t.set(o,l=e.push(o)-1)}return n[l%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new rr;for(const l of o)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Qn(e,n).unknown(r)},Un.apply(i,arguments),i}function Zi(){var t=Qn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,l,s=!1,u=0,a=0,c=.5;delete t.unknown;function h(){var f=e().length,g=i<r,v=g?i:r,y=g?r:i;o=(y-v)/Math.max(1,f-u+a*2),s&&(o=Math.floor(o)),v+=(y-v-o*(f-u))*c,l=o*(1-u),s&&(v=Math.round(v),l=Math.round(l));var p=qo(f).map(function(w){return v+o*w});return n(g?p.reverse():p)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return l},t.step=function(){return o},t.round=function(f){return arguments.length?(s=!!f,h()):s},t.padding=function(f){return arguments.length?(u=Math.min(1,a=+f),h()):u},t.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),h()):u},t.paddingOuter=function(f){return arguments.length?(a=+f,h()):a},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},t.copy=function(){return Zi(e(),[r,i]).round(s).paddingInner(u).paddingOuter(a).align(c)},Un.apply(h(),arguments)}function $c(t){return function(){return t}}function Oc(t){return+t}var $r=[0,1];function Tt(t){return t}function On(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$c(isNaN(e)?NaN:.5)}function Xc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Cc(t,e,n){var r=t[0],i=t[1],o=e[0],l=e[1];return i<r?(r=On(i,r),o=n(l,o)):(r=On(r,i),o=n(o,l)),function(s){return o(r(s))}}function Ic(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=On(t[l],t[l+1]),o[l]=n(e[l],e[l+1]);return function(s){var u=Co(t,s,1,r)-1;return o[u](i[u](s))}}function Rc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bc(){var t=$r,e=$r,n=en,r,i,o,l=Tt,s,u,a;function c(){var f=Math.min(t.length,e.length);return l!==Tt&&(l=Xc(t[0],t[f-1])),s=f>2?Ic:Cc,u=a=null,h}function h(f){return f==null||isNaN(f=+f)?o:(u||(u=s(t.map(r),e,n)))(r(l(f)))}return h.invert=function(f){return l(i((a||(a=s(e,t.map(r),xt)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Oc),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Ri,c()},h.clamp=function(f){return arguments.length?(l=f?!0:Tt,c()):l!==Tt},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,g){return r=f,i=g,c()}}function Tc(){return Bc()(Tt,Tt)}function Yc(t,e,n,r){var i=Do(t,e,n),o;switch(r=Ve(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Wu(i,l))&&(r.precision=o),Ui(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=tc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Zu(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ki(r)}function Wi(t){var e=t.domain;return t.ticks=function(n){var r=e();return zo(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Yc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,l=r[i],s=r[o],u,a,c=10;for(s<l&&(a=l,l=s,s=a,a=i,i=o,o=a);c-- >0;){if(a=xn(l,s,n),a===u)return r[i]=l,r[o]=s,e(r);if(a>0)l=Math.floor(l/a)*a,s=Math.ceil(s/a)*a;else if(a<0)l=Math.ceil(l*a)/a,s=Math.floor(s*a)/a;else break;u=a}return t},t}function ht(){var t=Tc();return t.copy=function(){return Rc(t,ht())},Un.apply(t,arguments),Wi(t)}function Pc(){var t=0,e=1,n,r,i,o,l=Tt,s=!1,u;function a(h){return h==null||isNaN(h=+h)?u:l(i===0?.5:(h=(o(h)-n)*i,s?Math.max(0,Math.min(1,h)):h))}a.domain=function(h){return arguments.length?([t,e]=h,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),a):[t,e]},a.clamp=function(h){return arguments.length?(s=!!h,a):s},a.interpolator=function(h){return arguments.length?(l=h,a):l};function c(h){return function(f){var g,v;return arguments.length?([g,v]=f,l=h(g,v),a):[l(0),l(1)]}}return a.range=c(en),a.rangeRound=c(Ri),a.unknown=function(h){return arguments.length?(u=h,a):u},function(h){return o=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),a}}function zc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function to(){var t=Wi(Pc()(Tt));return t.copy=function(){return zc(t,to())},Sc.apply(t,arguments)}function Dc(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const qc=t=>qs(t[t.length-1]);var Lc=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Dc);const Fc=qc(Lc);function It(t){return function(){return t}}const Or=Math.abs,tt=Math.atan2,Pt=Math.cos,Hc=Math.max,fn=Math.min,Mt=Math.sin,Qt=Math.sqrt,ft=1e-12,ve=Math.PI,Je=ve/2,jc=2*ve;function Vc(t){return t>1?0:t<-1?ve:Math.acos(t)}function Xr(t){return t>=1?Je:t<=-1?-Je:Math.asin(t)}function Gc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new jn(e)}function Jc(t){return t.innerRadius}function Kc(t){return t.outerRadius}function Uc(t){return t.startAngle}function Qc(t){return t.endAngle}function Zc(t){return t&&t.padAngle}function Wc(t,e,n,r,i,o,l,s){var u=n-t,a=r-e,c=l-i,h=s-o,f=h*u-c*a;if(!(f*f<ft))return f=(c*(e-o)-h*(t-i))/f,[t+f*u,e+f*a]}function Se(t,e,n,r,i,o,l){var s=t-n,u=e-r,a=(l?o:-o)/Qt(s*s+u*u),c=a*u,h=-a*s,f=t+c,g=e+h,v=n+c,y=r+h,p=(f+v)/2,w=(g+y)/2,d=v-f,_=y-g,m=d*d+_*_,x=i-o,b=f*y-v*g,A=(_<0?-1:1)*Qt(Hc(0,x*x*m-b*b)),k=(b*_-d*A)/m,E=(-b*d-_*A)/m,S=(b*_+d*A)/m,N=(-b*d+_*A)/m,C=k-p,M=E-w,I=S-p,Y=N-w;return C*C+M*M>I*I+Y*Y&&(k=S,E=N),{cx:k,cy:E,x01:-c,y01:-h,x11:k*(i/x-1),y11:E*(i/x-1)}}function tf(){var t=Jc,e=Kc,n=It(0),r=null,i=Uc,o=Qc,l=Zc,s=null,u=Gc(a);function a(){var c,h,f=+t.apply(this,arguments),g=+e.apply(this,arguments),v=i.apply(this,arguments)-Je,y=o.apply(this,arguments)-Je,p=Or(y-v),w=y>v;if(s||(s=c=u()),g<f&&(h=g,g=f,f=h),!(g>ft))s.moveTo(0,0);else if(p>jc-ft)s.moveTo(g*Pt(v),g*Mt(v)),s.arc(0,0,g,v,y,!w),f>ft&&(s.moveTo(f*Pt(y),f*Mt(y)),s.arc(0,0,f,y,v,w));else{var d=v,_=y,m=v,x=y,b=p,A=p,k=l.apply(this,arguments)/2,E=k>ft&&(r?+r.apply(this,arguments):Qt(f*f+g*g)),S=fn(Or(g-f)/2,+n.apply(this,arguments)),N=S,C=S,M,I;if(E>ft){var Y=Xr(E/f*Mt(k)),$=Xr(E/g*Mt(k));(b-=Y*2)>ft?(Y*=w?1:-1,m+=Y,x-=Y):(b=0,m=x=(v+y)/2),(A-=$*2)>ft?($*=w?1:-1,d+=$,_-=$):(A=0,d=_=(v+y)/2)}var X=g*Pt(d),T=g*Mt(d),q=f*Pt(x),B=f*Mt(x);if(S>ft){var z=g*Pt(_),D=g*Mt(_),U=f*Pt(m),H=f*Mt(m),J;if(p<ve)if(J=Wc(X,T,U,H,z,D,q,B)){var L=X-J[0],K=T-J[1],W=z-J[0],Q=D-J[1],nt=1/Mt(Vc((L*W+K*Q)/(Qt(L*L+K*K)*Qt(W*W+Q*Q)))/2),rt=Qt(J[0]*J[0]+J[1]*J[1]);N=fn(S,(f-rt)/(nt-1)),C=fn(S,(g-rt)/(nt+1))}else N=C=0}A>ft?C>ft?(M=Se(U,H,X,T,g,C,w),I=Se(z,D,q,B,g,C,w),s.moveTo(M.cx+M.x01,M.cy+M.y01),C<S?s.arc(M.cx,M.cy,C,tt(M.y01,M.x01),tt(I.y01,I.x01),!w):(s.arc(M.cx,M.cy,C,tt(M.y01,M.x01),tt(M.y11,M.x11),!w),s.arc(0,0,g,tt(M.cy+M.y11,M.cx+M.x11),tt(I.cy+I.y11,I.cx+I.x11),!w),s.arc(I.cx,I.cy,C,tt(I.y11,I.x11),tt(I.y01,I.x01),!w))):(s.moveTo(X,T),s.arc(0,0,g,d,_,!w)):s.moveTo(X,T),!(f>ft)||!(b>ft)?s.lineTo(q,B):N>ft?(M=Se(q,B,z,D,f,-N,w),I=Se(X,T,U,H,f,-N,w),s.lineTo(M.cx+M.x01,M.cy+M.y01),N<S?s.arc(M.cx,M.cy,N,tt(M.y01,M.x01),tt(I.y01,I.x01),!w):(s.arc(M.cx,M.cy,N,tt(M.y01,M.x01),tt(M.y11,M.x11),!w),s.arc(0,0,f,tt(M.cy+M.y11,M.cx+M.x11),tt(I.cy+I.y11,I.cx+I.x11),w),s.arc(I.cx,I.cy,N,tt(I.y11,I.x11),tt(I.y01,I.x01),!w))):s.arc(0,0,f,x,m,w)}if(s.closePath(),c)return s=null,c+""||null}return a.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ve/2;return[Pt(h)*c,Mt(h)*c]},a.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:It(+c),a):t},a.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:It(+c),a):e},a.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:It(+c),a):n},a.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:It(+c),a):r},a.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:It(+c),a):i},a.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:It(+c),a):o},a.padAngle=function(c){return arguments.length?(l=typeof c=="function"?c:It(+c),a):l},a.context=function(c){return arguments.length?(s=c??null,a):s},a}function he(t,e,n){this.k=t,this.x=e,this.y=n}he.prototype={constructor:he,scale:function(t){return t===1?this:new he(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new he(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};he.prototype;const Xn=["Proud","Resigned","Angry","Worried","Neutral"],Zn=Qn().domain(Xn).range(["#fdb66e","#c5d0fb","#ff5e5e","#fbd4f7","#eeeeee"]);function Cr(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function Ir(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function Rr(t,e,n){const r=t.slice();return r[35]=e[n],r[37]=n,r}function Br(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function Tr(t,e,n){const r=t.slice();return r[35]=e[n],r[37]=n,r}function Yr(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function ef(t){let e,n,r=t[29].file_name.replaceAll("chunks_","")+"",i,o,l,s,u;function a(){return t[22](t[31])}let c=et(t[29].data),h=[];for(let f=0;f<c.length;f+=1)h[f]=Dr(Ir(t,c,f));return{c(){e=P("div"),n=P("div"),i=at(r),o=V(),l=P("div");for(let f=0;f<h.length;f+=1)h[f].c();O(n,"role","button"),O(n,"tabindex",t[31]),O(n,"class","interview-item-index clickable text-center basis-[5%] px-1 border border-black rounded flex items-center justify-center"),O(l,"class","chunk-title grow flex flex-col gap-y-0.5"),O(e,"class","interview-item shadow-[0_0_4px_black] rounded flex py-1 px-0.5 mx-1")},m(f,g){G(f,e,g),R(e,n),R(n,i),R(e,o),R(e,l);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(l,null);s||(u=[Z(n,"keyup",sf),Z(n,"click",a)],s=!0)},p(f,g){if(t=f,g[0]&1&&r!==(r=t[29].file_name.replaceAll("chunks_","")+"")&&Ot(i,r),g[0]&967){c=et(t[29].data);let v;for(v=0;v<c.length;v+=1){const y=Ir(t,c,v);h[v]?h[v].p(y,g):(h[v]=Dr(y),h[v].c(),h[v].m(l,null))}for(;v<h.length;v+=1)h[v].d(1);h.length=c.length}},d(f){f&&j(e),Yt(h,f),s=!1,gt(u)}}}function nf(t){let e,n,r=t[29].file_name.replaceAll("chunks_","")+"",i,o,l,s,u,a,c;function h(){return t[15](t[31])}let f=et(t[29].data),g=[];for(let p=0;p<f.length;p+=1)g[p]=qr(Yr(t,f,p));let v=et(t[29].data),y=[];for(let p=0;p<v.length;p+=1)y[p]=Hr(Br(t,v,p));return{c(){e=P("div"),n=P("div"),i=at(r),o=V(),l=P("div");for(let p=0;p<g.length;p+=1)g[p].c();s=V(),u=P("div");for(let p=0;p<y.length;p+=1)y[p].c();O(n,"role","button"),O(n,"tabindex",t[31]),O(n,"class","interview-item-index clickable text-center basis-[5%] px-1 border border-black rounded flex items-center justify-center"),O(l,"class","grow flex flex-wrap ml-1 gap-x-0.5 gap-y-0.5"),O(e,"class","interview-item shadow-[0_0_4px_black] rounded flex py-1 px-0.5 mx-1")},m(p,w){G(p,e,w),R(e,n),R(n,i),R(e,o),R(e,l);for(let d=0;d<g.length;d+=1)g[d]&&g[d].m(l,null);G(p,s,w),G(p,u,w);for(let d=0;d<y.length;d+=1)y[d]&&y[d].m(u,null);a||(c=[Z(n,"keyup",lf),Z(n,"click",h)],a=!0)},p(p,w){if(t=p,w[0]&1&&r!==(r=t[29].file_name.replaceAll("chunks_","")+"")&&Ot(i,r),w[0]&599){f=et(t[29].data);let d;for(d=0;d<f.length;d+=1){const _=Yr(t,f,d);g[d]?g[d].p(_,w):(g[d]=qr(_),g[d].c(),g[d].m(l,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=f.length}if(w[0]&919){v=et(t[29].data);let d;for(d=0;d<v.length;d+=1){const _=Br(t,v,d);y[d]?y[d].p(_,w):(y[d]=Hr(_),y[d].c(),y[d].m(u,null))}for(;d<y.length;d+=1)y[d].d(1);y.length=v.length}},d(p){p&&(j(e),j(s),j(u)),Yt(g,p),Yt(y,p),a=!1,gt(c)}}}function Pr(t){let e,n,r,i,o,l,s;function u(){return t[25](t[31],t[34])}function a(){return t[26](t[31],t[34])}let c=et(t[32].conversation),h=[];for(let f=0;f<c.length;f+=1)h[f]=zr(Rr(t,c,f));return{c(){e=P("div"),n=P("div"),r=V(),i=P("div");for(let f=0;f<h.length;f+=1)h[f].c();o=V(),O(n,"role","button"),O(n,"tabindex",t[34]),O(n,"class","close-conversation clickable text-center rounded h-full ml-1 mr-0.5 w-[1.375rem] text-[1.5rem] shrink-0 flex flex-col flex-nowrap items-center justify-center bg-gray-100"),O(i,"class","grow"),O(e,"class","conversation-container flex")},m(f,g){G(f,e,g),R(e,n),R(e,r),R(e,i);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(i,null);R(e,o),l||(s=[Z(n,"keyup",u),Z(n,"click",a)],l=!0)},p(f,g){if(t=f,g[0]&385){c=et(t[32].conversation);let v;for(v=0;v<c.length;v+=1){const y=Rr(t,c,v);h[v]?h[v].p(y,g):(h[v]=zr(y),h[v].c(),h[v].m(i,null))}for(;v<h.length;v+=1)h[v].d(1);h.length=c.length}},d(f){f&&j(e),Yt(h,f),l=!1,gt(s)}}}function zr(t){let e,n,r=t[7][t[35].speaker]+"",i,o,l,s,u=t[35].content+"",a,c;return{c(){e=P("div"),n=P("div"),i=at(r),o=at(":"),l=V(),s=P("div"),a=V(),O(n,"class","interview-message-speaker font-bold"),O(s,"class","interview-message-content"),O(e,"class",c="interview-message border-b p-1 border-l border-black border-dashed "+t[8][t[35].speaker]+" svelte-3iv6sw")},m(h,f){G(h,e,f),R(e,n),R(n,i),R(n,o),R(e,l),R(e,s),s.innerHTML=u,R(e,a)},p(h,f){f[0]&1&&r!==(r=h[7][h[35].speaker]+"")&&Ot(i,r),f[0]&1&&u!==(u=h[35].content+"")&&(s.innerHTML=u),f[0]&1&&c!==(c="interview-message border-b p-1 border-l border-black border-dashed "+h[8][h[35].speaker]+" svelte-3iv6sw")&&O(e,"class",c)},d(h){h&&j(e)}}}function Dr(t){let e,n,r,i,o=t[32].title+"",l,s,u,a,c,h,f;function g(){return t[23](t[31],t[34])}function v(){return t[24](t[31],t[34])}let y=t[1][t[31]][t[34]]&&Pr(t);return{c(){e=P("div"),n=P("div"),n.textContent=`${t[34]+1}.`,r=V(),i=P("div"),l=at(o),a=V(),y&&y.c(),c=ci(),O(n,"class","w-[1.5rem] shrink-0 text-center border-r border-black"),O(i,"class","px-1"),O(e,"role","button"),O(e,"tabindex",t[34]),O(e,"id",s=t[32].id),O(e,"class",In("chunk clickable text-left flex mx-1 flex-auto border border-black rounded")+" svelte-3iv6sw"),O(e,"style",u=`background: ${t[9](t[32])}`),mt(e,"chunk-highlight",t[2][t[31]][t[34]]),mt(e,"chunk-not-highlight",t[6]&&!t[2][t[31]][t[34]])},m(p,w){G(p,e,w),R(e,n),R(e,r),R(e,i),R(i,l),G(p,a,w),y&&y.m(p,w),G(p,c,w),h||(f=[Z(e,"keyup",g),Z(e,"click",v)],h=!0)},p(p,w){t=p,w[0]&1&&o!==(o=t[32].title+"")&&Ot(l,o),w[0]&1&&s!==(s=t[32].id)&&O(e,"id",s),w[0]&1&&u!==(u=`background: ${t[9](t[32])}`)&&O(e,"style",u),w[0]&4&&mt(e,"chunk-highlight",t[2][t[31]][t[34]]),w[0]&68&&mt(e,"chunk-not-highlight",t[6]&&!t[2][t[31]][t[34]]),t[1][t[31]][t[34]]?y?y.p(t,w):(y=Pr(t),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null)},d(p){p&&(j(e),j(a),j(c)),y&&y.d(p),h=!1,gt(f)}}}function qr(t){let e,n=t[34]+1+"",r,i,o,l,s,u;function a(){return t[16](t[31],t[34],t[32])}function c(){return t[17](t[31],t[34],t[32])}return{c(){e=P("div"),r=at(n),i=V(),O(e,"role","button"),O(e,"tabindex",t[34]),O(e,"id",o=t[32].id),O(e,"class",In("chunk clickable text-center w-[1.5rem] border border-black rounded")+" svelte-3iv6sw"),O(e,"style",l=`background: ${t[9](t[32])}`),mt(e,"chunk-highlight",t[2][t[31]][t[34]]),mt(e,"chunk-not-highlight",t[6]&&!t[2][t[31]][t[34]])},m(h,f){G(h,e,f),R(e,r),R(e,i),s||(u=[Z(e,"keyup",a),Z(e,"click",c)],s=!0)},p(h,f){t=h,f[0]&1&&o!==(o=t[32].id)&&O(e,"id",o),f[0]&1&&l!==(l=`background: ${t[9](t[32])}`)&&O(e,"style",l),f[0]&4&&mt(e,"chunk-highlight",t[2][t[31]][t[34]]),f[0]&68&&mt(e,"chunk-not-highlight",t[6]&&!t[2][t[31]][t[34]])},d(h){h&&j(e),s=!1,gt(u)}}}function Lr(t){let e,n,r,i,o,l,s=t[32].title+"",u,a,c,h,f,g,v,y,p,w,d;function _(){return t[18](t[31],t[34],t[32])}function m(){return t[19](t[31],t[34],t[32])}function x(){return t[20](t[31],t[34])}function b(){return t[21](t[31],t[34])}let A=et(t[32].conversation),k=[];for(let E=0;E<A.length;E+=1)k[E]=Fr(Tr(t,A,E));return{c(){e=P("div"),n=P("div"),r=P("div"),i=P("div"),i.textContent=`${t[34]+1}.`,o=V(),l=P("div"),u=at(s),h=V(),f=P("div"),g=P("div"),v=V(),y=P("div");for(let E=0;E<k.length;E+=1)k[E].c();p=V(),O(i,"class","w-[1.5rem] shrink-0 text-center border-r border-black flex items-center justify-center"),O(l,"class","px-1 py-1"),O(r,"role","button"),O(r,"tabindex",t[34]),O(r,"id",a=t[32].id),O(r,"class",In("chunk flex clickable mx-1 mt-1 flex-auto rounded shadow text-left")+" svelte-3iv6sw"),O(r,"style",c=`background: ${t[9](t[32])}`),O(g,"role","button"),O(g,"tabindex",t[34]),O(g,"class","close-conversation clickable text-center rounded h-full ml-1 mr-0.5 w-[1.375rem] text-[1.5rem] shrink-0 flex flex-col flex-nowrap items-center justify-center bg-gray-100"),O(y,"class","grow"),O(f,"class","flex"),O(n,"class","flex flex-col gap-y-1"),O(e,"class","conversation-container flex")},m(E,S){G(E,e,S),R(e,n),R(n,r),R(r,i),R(r,o),R(r,l),R(l,u),R(n,h),R(n,f),R(f,g),R(f,v),R(f,y);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(y,null);R(e,p),w||(d=[Z(r,"keyup",_),Z(r,"click",m),Z(g,"keyup",x),Z(g,"click",b)],w=!0)},p(E,S){if(t=E,S[0]&1&&s!==(s=t[32].title+"")&&Ot(u,s),S[0]&1&&a!==(a=t[32].id)&&O(r,"id",a),S[0]&1&&c!==(c=`background: ${t[9](t[32])}`)&&O(r,"style",c),S[0]&385){A=et(t[32].conversation);let N;for(N=0;N<A.length;N+=1){const C=Tr(t,A,N);k[N]?k[N].p(C,S):(k[N]=Fr(C),k[N].c(),k[N].m(y,null))}for(;N<k.length;N+=1)k[N].d(1);k.length=A.length}},d(E){E&&j(e),Yt(k,E),w=!1,gt(d)}}}function Fr(t){let e,n,r=t[7][t[35].speaker]+"",i,o,l,s,u=t[35].content+"",a,c;return{c(){e=P("div"),n=P("div"),i=at(r),o=at(":"),l=V(),s=P("div"),a=V(),O(n,"class","interview-message-speaker font-bold"),O(s,"class","interview-message-content"),O(e,"class",c="interview-message border-b p-1 border-l border-black border-dashed "+t[8][t[35].speaker]+" svelte-3iv6sw")},m(h,f){G(h,e,f),R(e,n),R(n,i),R(n,o),R(e,l),R(e,s),s.innerHTML=u,R(e,a)},p(h,f){f[0]&1&&r!==(r=h[7][h[35].speaker]+"")&&Ot(i,r),f[0]&1&&u!==(u=h[35].content+"")&&(s.innerHTML=u),f[0]&1&&c!==(c="interview-message border-b p-1 border-l border-black border-dashed "+h[8][h[35].speaker]+" svelte-3iv6sw")&&O(e,"class",c)},d(h){h&&j(e)}}}function Hr(t){let e,n=t[1][t[31]][t[34]]&&Lr(t);return{c(){n&&n.c(),e=ci()},m(r,i){n&&n.m(r,i),G(r,e,i)},p(r,i){r[1][r[31]][r[34]]?n?n.p(r,i):(n=Lr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&j(e),n&&n.d(r)}}}function jr(t){let e,n;function r(l,s){return l[5][l[31]]?ef:nf}let i=r(t),o=i(t);return{c(){e=P("div"),o.c(),n=V(),O(e,"class","flex flex-col w-full")},m(l,s){G(l,e,s),o.m(e,null),R(e,n)},p(l,s){i===(i=r(l))&&o?o.p(l,s):(o.d(1),o=i(l),o&&(o.c(),o.m(e,n)))},d(l){l&&j(e),o.d()}}}function Vr(t){let e,n=et(t[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=jr(Cr(t,n,i));return{c(){e=P("div");for(let i=0;i<r.length;i+=1)r[i].c();O(e,"class","interview-container flex flex-col text-left space-y-1 w-full h-full")},m(i,o){G(i,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(i,o){if(o[0]&1015){n=et(i[0]);let l;for(l=0;l<n.length;l+=1){const s=Cr(i,n,l);r[l]?r[l].p(s,o):(r[l]=jr(s),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){i&&j(e),Yt(r,i)}}}function rf(t){let e,n,r,i=t[3],o=Vr(t);return{c(){e=P("div"),n=P("div"),n.textContent="Interview Contents",r=V(),o.c(),O(n,"class","title border border-gray rounded shadow-lg m-1 py-2 text-xl font-bold text-center flex items-center justify-center svelte-3iv6sw"),O(e,"class","w-full h-full overflow-y-scroll")},m(l,s){G(l,e,s),R(e,n),R(e,r),o.m(e,null)},p(l,s){s[0]&8&&we(i,i=l[3])?(o.d(1),o=Vr(l),o.c(),o.m(e,null)):o.p(l,s)},i:jt,o:jt,d(l){l&&j(e),o.d(l)}}}function of(t,e){t.forEach(n=>{n.data.forEach((r,i)=>{r.id===e.id&&(n.data[i]=e)})})}const lf=()=>{},sf=()=>{};function af(t,e,n){let r,i,{data:o}=e;const l={1:"Host",0:"Guest"},s={1:"bg-gray-100",0:"bg-lime-100"};let u=0,a=[],c=[],h=[],f=!1,g={},v;hi(()=>{console.log(o,a),v=JSON.parse(JSON.stringify(o))});function y($){const X=$.emotion;return Zn(X)}function p($){console.log({highlight_chunks:$}),w(),n(14,f=!0),$||(n(14,f=!1),$=[]),n(4,h=$.map(X=>X.id)),h.forEach(X=>{const T=g[X];n(2,c[T[0]][T[1]]=!0,c)})}function w(){n(2,c=[]),o.forEach(($,X)=>{a.push([]),$.data.forEach((T,q)=>{c[X]||n(2,c[X]=[],c),c[X].push(!1)})})}function d($,X){console.log({keyword_chunks:$,keywords:X}),_(),$=JSON.parse(JSON.stringify($)),$.forEach((T,q)=>{const B=X[q];T.forEach(z=>{z.conversation.forEach(D=>{D.content=D.content.replaceAll(B,`<span class="keyword-highlighted">${B}</span>`)}),of(o,z)})}),n(3,u+=1),console.log($)}function _(){n(0,o=JSON.parse(JSON.stringify(v)))}const m=$=>n(5,i[$]=!i[$],i),x=($,X,T)=>{n(1,a[$][X]=!a[$][X],a),a[$][X]?n(2,c[$][X]=!0,c):n(2,c[$][X]=h.includes(T.id),c)},b=($,X,T)=>{n(1,a[$][X]=!a[$][X],a),a[$][X]?n(2,c[$][X]=!0,c):n(2,c[$][X]=h.includes(T.id),c)},A=($,X,T)=>{n(1,a[$][X]=!a[$][X],a),a[$][X]?n(2,c[$][X]=!0,c):n(2,c[$][X]=h.includes(T.id),c)},k=($,X,T)=>{n(1,a[$][X]=!a[$][X],a),a[$][X]?n(2,c[$][X]=!0,c):n(2,c[$][X]=h.includes(T.id),c)},E=($,X)=>n(1,a[$][X]=!a[$][X],a),S=($,X)=>n(1,a[$][X]=!a[$][X],a),N=$=>n(5,i[$]=!i[$],i),C=($,X)=>n(1,a[$][X]=!a[$][X],a),M=($,X)=>n(1,a[$][X]=!a[$][X],a),I=($,X)=>n(1,a[$][X]=!a[$][X],a),Y=($,X)=>n(1,a[$][X]=!a[$][X],a);return t.$$set=$=>{"data"in $&&n(0,o=$.data)},t.$$.update=()=>{t.$$.dirty[0]&7&&o.forEach(($,X)=>{c.push([]),a.push([]),$.data.forEach((T,q)=>{c[X].push(!1),a[X].push(!1),g[T.id]=[X,q]})}),t.$$.dirty[0]&16388&&n(6,r=f||c.flat().some($=>$)),t.$$.dirty[0]&1&&n(5,i=Array.apply(null,Array(o.length)).map(()=>!1))},[o,a,c,u,h,i,r,l,s,y,p,w,d,_,f,m,x,b,A,k,E,S,N,C,M,I,Y]}class uf extends We{constructor(e){super(),Ze(this,e,af,rf,we,{data:0,highlight_chunks:10,dehighlight_chunks:11,highlight_keywords:12,dehighlight_keywords:13},null,[-1,-1])}get highlight_chunks(){return this.$$.ctx[10]}get dehighlight_chunks(){return this.$$.ctx[11]}get highlight_keywords(){return this.$$.ctx[12]}get dehighlight_keywords(){return this.$$.ctx[13]}}var Ut=Math.PI/3,cf=[0,Ut,2*Ut,3*Ut,4*Ut,5*Ut];function ff(t){return t[0]}function hf(t){return t[1]}function df(){var t=0,e=0,n=1,r=1,i=ff,o=hf,l,s,u;function a(h){var f={},g=[],v,y=h.length;for(v=0;v<y;++v)if(!(isNaN(w=+i.call(null,p=h[v],v,h))||isNaN(d=+o.call(null,p,v,h)))){var p,w,d,_=Math.round(d=d/u),m=Math.round(w=w/s-(_&1)/2),x=d-_;if(Math.abs(x)*3>1){var b=w-m,A=m+(w<m?-1:1)/2,k=_+(d<_?-1:1),E=w-A,S=d-k;b*b+x*x>E*E+S*S&&(m=A+(_&1?1:-1)/2,_=k)}var N=m+"-"+_,C=f[N];C?C.push(p):(g.push(C=f[N]=[p]),C.x=(m+(_&1)/2)*s,C.y=_*u)}return g}function c(h){var f=0,g=0;return cf.map(function(v){var y=Math.sin(v)*h,p=-Math.cos(v)*h,w=y-f,d=p-g;return f=y,g=p,[w,d]})}return a.hexagon=function(h){return"m"+c(h==null?l:+h).join("l")+"z"},a.centers=function(){for(var h=[],f=Math.round(e/u),g=Math.round(t/s),v=f*u;v<r+l;v+=u,++f)for(var y=g*s+(f&1)*s/2;y<n+s/2;y+=s)h.push([y,v]);return h},a.mesh=function(){var h=c(l).slice(0,4).join("l");return a.centers().map(function(f){return"M"+f+"m"+h}).join("")},a.x=function(h){return arguments.length?(i=h,a):i},a.y=function(h){return arguments.length?(o=h,a):o},a.radius=function(h){return arguments.length?(l=+h,s=l*2*Math.sin(Ut),u=l*1.5,a):l},a.size=function(h){return arguments.length?(t=e=0,n=+h[0],r=+h[1],a):[n-t,r-e]},a.extent=function(h){return arguments.length?(t=+h[0][0],e=+h[0][1],n=+h[1][0],r=+h[1][1],a):[[t,e],[n,r]]},a.radius(1)}var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Wn={exports:{}},no={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(eo,function(){function n(d,_,m,x,b){(function A(k,E,S,N,C){for(;N>S;){if(N-S>600){var M=N-S+1,I=E-S+1,Y=Math.log(M),$=.5*Math.exp(2*Y/3),X=.5*Math.sqrt(Y*$*(M-$)/M)*(I-M/2<0?-1:1),T=Math.max(S,Math.floor(E-I*$/M+X)),q=Math.min(N,Math.floor(E+(M-I)*$/M+X));A(k,E,T,q,C)}var B=k[E],z=S,D=N;for(r(k,S,E),C(k[N],B)>0&&r(k,S,N);z<D;){for(r(k,z,D),z++,D--;C(k[z],B)<0;)z++;for(;C(k[D],B)>0;)D--}C(k[S],B)===0?r(k,S,D):r(k,++D,N),D<=E&&(S=D+1),E<=D&&(N=D-1)}})(d,_,m||0,x||d.length-1,b||i)}function r(d,_,m){var x=d[_];d[_]=d[m],d[m]=x}function i(d,_){return d<_?-1:d>_?1:0}var o=function(d){d===void 0&&(d=9),this._maxEntries=Math.max(4,d),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(d,_,m){if(!m)return _.indexOf(d);for(var x=0;x<_.length;x++)if(m(d,_[x]))return x;return-1}function s(d,_){u(d,0,d.children.length,_,d)}function u(d,_,m,x,b){b||(b=p(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var A=_;A<m;A++){var k=d.children[A];a(b,d.leaf?x(k):k)}return b}function a(d,_){return d.minX=Math.min(d.minX,_.minX),d.minY=Math.min(d.minY,_.minY),d.maxX=Math.max(d.maxX,_.maxX),d.maxY=Math.max(d.maxY,_.maxY),d}function c(d,_){return d.minX-_.minX}function h(d,_){return d.minY-_.minY}function f(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function g(d){return d.maxX-d.minX+(d.maxY-d.minY)}function v(d,_){return d.minX<=_.minX&&d.minY<=_.minY&&_.maxX<=d.maxX&&_.maxY<=d.maxY}function y(d,_){return _.minX<=d.maxX&&_.minY<=d.maxY&&_.maxX>=d.minX&&_.maxY>=d.minY}function p(d){return{children:d,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(d,_,m,x,b){for(var A=[_,m];A.length;)if(!((m=A.pop())-(_=A.pop())<=x)){var k=_+Math.ceil((m-_)/x/2)*x;n(d,k,_,m,b),A.push(_,k,k,m)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(d){var _=this.data,m=[];if(!y(d,_))return m;for(var x=this.toBBox,b=[];_;){for(var A=0;A<_.children.length;A++){var k=_.children[A],E=_.leaf?x(k):k;y(d,E)&&(_.leaf?m.push(k):v(d,E)?this._all(k,m):b.push(k))}_=b.pop()}return m},o.prototype.collides=function(d){var _=this.data;if(!y(d,_))return!1;for(var m=[];_;){for(var x=0;x<_.children.length;x++){var b=_.children[x],A=_.leaf?this.toBBox(b):b;if(y(d,A)){if(_.leaf||v(d,A))return!0;m.push(b)}}_=m.pop()}return!1},o.prototype.load=function(d){if(!d||!d.length)return this;if(d.length<this._minEntries){for(var _=0;_<d.length;_++)this.insert(d[_]);return this}var m=this._build(d.slice(),0,d.length-1,0);if(this.data.children.length)if(this.data.height===m.height)this._splitRoot(this.data,m);else{if(this.data.height<m.height){var x=this.data;this.data=m,m=x}this._insert(m,this.data.height-m.height-1,!0)}else this.data=m;return this},o.prototype.insert=function(d){return d&&this._insert(d,this.data.height-1),this},o.prototype.clear=function(){return this.data=p([]),this},o.prototype.remove=function(d,_){if(!d)return this;for(var m,x,b,A=this.data,k=this.toBBox(d),E=[],S=[];A||E.length;){if(A||(A=E.pop(),x=E[E.length-1],m=S.pop(),b=!0),A.leaf){var N=l(d,A.children,_);if(N!==-1)return A.children.splice(N,1),E.push(A),this._condense(E),this}b||A.leaf||!v(A,k)?x?(m++,A=x.children[m],b=!1):A=null:(E.push(A),S.push(m),m=0,x=A,A=A.children[0])}return this},o.prototype.toBBox=function(d){return d},o.prototype.compareMinX=function(d,_){return d.minX-_.minX},o.prototype.compareMinY=function(d,_){return d.minY-_.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(d){return this.data=d,this},o.prototype._all=function(d,_){for(var m=[];d;)d.leaf?_.push.apply(_,d.children):m.push.apply(m,d.children),d=m.pop();return _},o.prototype._build=function(d,_,m,x){var b,A=m-_+1,k=this._maxEntries;if(A<=k)return s(b=p(d.slice(_,m+1)),this.toBBox),b;x||(x=Math.ceil(Math.log(A)/Math.log(k)),k=Math.ceil(A/Math.pow(k,x-1))),(b=p([])).leaf=!1,b.height=x;var E=Math.ceil(A/k),S=E*Math.ceil(Math.sqrt(k));w(d,_,m,S,this.compareMinX);for(var N=_;N<=m;N+=S){var C=Math.min(N+S-1,m);w(d,N,C,E,this.compareMinY);for(var M=N;M<=C;M+=E){var I=Math.min(M+E-1,C);b.children.push(this._build(d,M,I,x-1))}}return s(b,this.toBBox),b},o.prototype._chooseSubtree=function(d,_,m,x){for(;x.push(_),!_.leaf&&x.length-1!==m;){for(var b=1/0,A=1/0,k=void 0,E=0;E<_.children.length;E++){var S=_.children[E],N=f(S),C=(M=d,I=S,(Math.max(I.maxX,M.maxX)-Math.min(I.minX,M.minX))*(Math.max(I.maxY,M.maxY)-Math.min(I.minY,M.minY))-N);C<A?(A=C,b=N<b?N:b,k=S):C===A&&N<b&&(b=N,k=S)}_=k||_.children[0]}var M,I;return _},o.prototype._insert=function(d,_,m){var x=m?d:this.toBBox(d),b=[],A=this._chooseSubtree(x,this.data,_,b);for(A.children.push(d),a(A,x);_>=0&&b[_].children.length>this._maxEntries;)this._split(b,_),_--;this._adjustParentBBoxes(x,b,_)},o.prototype._split=function(d,_){var m=d[_],x=m.children.length,b=this._minEntries;this._chooseSplitAxis(m,b,x);var A=this._chooseSplitIndex(m,b,x),k=p(m.children.splice(A,m.children.length-A));k.height=m.height,k.leaf=m.leaf,s(m,this.toBBox),s(k,this.toBBox),_?d[_-1].children.push(k):this._splitRoot(m,k)},o.prototype._splitRoot=function(d,_){this.data=p([d,_]),this.data.height=d.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(d,_,m){for(var x,b,A,k,E,S,N,C=1/0,M=1/0,I=_;I<=m-_;I++){var Y=u(d,0,I,this.toBBox),$=u(d,I,m,this.toBBox),X=(b=Y,A=$,k=void 0,E=void 0,S=void 0,N=void 0,k=Math.max(b.minX,A.minX),E=Math.max(b.minY,A.minY),S=Math.min(b.maxX,A.maxX),N=Math.min(b.maxY,A.maxY),Math.max(0,S-k)*Math.max(0,N-E)),T=f(Y)+f($);X<C?(C=X,x=I,M=T<M?T:M):X===C&&T<M&&(M=T,x=I)}return x||m-_},o.prototype._chooseSplitAxis=function(d,_,m){var x=d.leaf?this.compareMinX:c,b=d.leaf?this.compareMinY:h;this._allDistMargin(d,_,m,x)<this._allDistMargin(d,_,m,b)&&d.children.sort(x)},o.prototype._allDistMargin=function(d,_,m,x){d.children.sort(x);for(var b=this.toBBox,A=u(d,0,_,b),k=u(d,m-_,m,b),E=g(A)+g(k),S=_;S<m-_;S++){var N=d.children[S];a(A,d.leaf?b(N):N),E+=g(A)}for(var C=m-_-1;C>=_;C--){var M=d.children[C];a(k,d.leaf?b(M):M),E+=g(k)}return E},o.prototype._adjustParentBBoxes=function(d,_,m){for(var x=m;x>=0;x--)a(_[x],d)},o.prototype._condense=function(d){for(var _=d.length-1,m=void 0;_>=0;_--)d[_].children.length===0?_>0?(m=d[_-1].children).splice(m.indexOf(d[_]),1):this.clear():s(d[_],this.toBBox)},o})})(no);var mf=no.exports;class _f{constructor(e=[],n=yf){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,i=n[e];for(;e>0;){const o=e-1>>1,l=n[o];if(r(i,l)>=0)break;n[e]=l,e=o}n[e]=i}_down(e){const{data:n,compare:r}=this,i=this.length>>1,o=n[e];for(;e<i;){let l=(e<<1)+1,s=n[l];const u=l+1;if(u<this.length&&r(n[u],s)<0&&(l=u,s=n[u]),r(s,o)>=0)break;n[e]=s,e=l}n[e]=o}}function yf(t,e){return t<e?-1:t>e?1:0}const vf=Object.freeze(Object.defineProperty({__proto__:null,default:_f},Symbol.toStringTag,{value:"Module"})),wf=pf(vf);var on={exports:{}},xf=function(e,n,r,i){var o=e[0],l=e[1],s=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var u=(i-r)/2,a=0,c=u-1;a<u;c=a++){var h=n[r+a*2+0],f=n[r+a*2+1],g=n[r+c*2+0],v=n[r+c*2+1],y=f>l!=v>l&&o<(g-h)*(l-f)/(v-f)+h;y&&(s=!s)}return s},bf=function(e,n,r,i){var o=e[0],l=e[1],s=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var u=i-r,a=0,c=u-1;a<u;c=a++){var h=n[a+r][0],f=n[a+r][1],g=n[c+r][0],v=n[c+r][1],y=f>l!=v>l&&o<(g-h)*(l-f)/(v-f)+h;y&&(s=!s)}return s},ro=xf,io=bf;on.exports=function(e,n,r,i){return n.length>0&&Array.isArray(n[0])?io(e,n,r,i):ro(e,n,r,i)};on.exports.nested=io;on.exports.flat=ro;var kf=on.exports,Cn={exports:{}};(function(t,e){(function(n,r){r(e)})(eo,function(n){const i=33306690738754706e-32;function o(y,p,w,d,_){let m,x,b,A,k=p[0],E=d[0],S=0,N=0;E>k==E>-k?(m=k,k=p[++S]):(m=E,E=d[++N]);let C=0;if(S<y&&N<w)for(E>k==E>-k?(b=m-((x=k+m)-k),k=p[++S]):(b=m-((x=E+m)-E),E=d[++N]),m=x,b!==0&&(_[C++]=b);S<y&&N<w;)E>k==E>-k?(b=m-((x=m+k)-(A=x-m))+(k-A),k=p[++S]):(b=m-((x=m+E)-(A=x-m))+(E-A),E=d[++N]),m=x,b!==0&&(_[C++]=b);for(;S<y;)b=m-((x=m+k)-(A=x-m))+(k-A),k=p[++S],m=x,b!==0&&(_[C++]=b);for(;N<w;)b=m-((x=m+E)-(A=x-m))+(E-A),E=d[++N],m=x,b!==0&&(_[C++]=b);return m===0&&C!==0||(_[C++]=m),C}function l(y){return new Float64Array(y)}const s=33306690738754716e-32,u=22204460492503146e-32,a=11093356479670487e-47,c=l(4),h=l(8),f=l(12),g=l(16),v=l(4);n.orient2d=function(y,p,w,d,_,m){const x=(p-m)*(w-_),b=(y-_)*(d-m),A=x-b;if(x===0||b===0||x>0!=b>0)return A;const k=Math.abs(x+b);return Math.abs(A)>=s*k?A:-function(E,S,N,C,M,I,Y){let $,X,T,q,B,z,D,U,H,J,L,K,W,Q,nt,rt,Xt,pt;const _t=E-M,yt=N-M,vt=S-I,wt=C-I;B=(nt=(U=_t-(D=(z=134217729*_t)-(z-_t)))*(J=wt-(H=(z=134217729*wt)-(z-wt)))-((Q=_t*wt)-D*H-U*H-D*J))-(L=nt-(Xt=(U=vt-(D=(z=134217729*vt)-(z-vt)))*(J=yt-(H=(z=134217729*yt)-(z-yt)))-((rt=vt*yt)-D*H-U*H-D*J))),c[0]=nt-(L+B)+(B-Xt),B=(W=Q-((K=Q+L)-(B=K-Q))+(L-B))-(L=W-rt),c[1]=W-(L+B)+(B-rt),B=(pt=K+L)-K,c[2]=K-(pt-B)+(L-B),c[3]=pt;let Ct=function(fo,tr){let er=tr[0];for(let ln=1;ln<fo;ln++)er+=tr[ln];return er}(4,c),oe=u*Y;if(Ct>=oe||-Ct>=oe||($=E-(_t+(B=E-_t))+(B-M),T=N-(yt+(B=N-yt))+(B-M),X=S-(vt+(B=S-vt))+(B-I),q=C-(wt+(B=C-wt))+(B-I),$===0&&X===0&&T===0&&q===0)||(oe=a*Y+i*Math.abs(Ct),(Ct+=_t*q+wt*$-(vt*T+yt*X))>=oe||-Ct>=oe))return Ct;B=(nt=(U=$-(D=(z=134217729*$)-(z-$)))*(J=wt-(H=(z=134217729*wt)-(z-wt)))-((Q=$*wt)-D*H-U*H-D*J))-(L=nt-(Xt=(U=X-(D=(z=134217729*X)-(z-X)))*(J=yt-(H=(z=134217729*yt)-(z-yt)))-((rt=X*yt)-D*H-U*H-D*J))),v[0]=nt-(L+B)+(B-Xt),B=(W=Q-((K=Q+L)-(B=K-Q))+(L-B))-(L=W-rt),v[1]=W-(L+B)+(B-rt),B=(pt=K+L)-K,v[2]=K-(pt-B)+(L-B),v[3]=pt;const ao=o(4,c,4,v,h);B=(nt=(U=_t-(D=(z=134217729*_t)-(z-_t)))*(J=q-(H=(z=134217729*q)-(z-q)))-((Q=_t*q)-D*H-U*H-D*J))-(L=nt-(Xt=(U=vt-(D=(z=134217729*vt)-(z-vt)))*(J=T-(H=(z=134217729*T)-(z-T)))-((rt=vt*T)-D*H-U*H-D*J))),v[0]=nt-(L+B)+(B-Xt),B=(W=Q-((K=Q+L)-(B=K-Q))+(L-B))-(L=W-rt),v[1]=W-(L+B)+(B-rt),B=(pt=K+L)-K,v[2]=K-(pt-B)+(L-B),v[3]=pt;const uo=o(ao,h,4,v,f);B=(nt=(U=$-(D=(z=134217729*$)-(z-$)))*(J=q-(H=(z=134217729*q)-(z-q)))-((Q=$*q)-D*H-U*H-D*J))-(L=nt-(Xt=(U=X-(D=(z=134217729*X)-(z-X)))*(J=T-(H=(z=134217729*T)-(z-T)))-((rt=X*T)-D*H-U*H-D*J))),v[0]=nt-(L+B)+(B-Xt),B=(W=Q-((K=Q+L)-(B=K-Q))+(L-B))-(L=W-rt),v[1]=W-(L+B)+(B-rt),B=(pt=K+L)-K,v[2]=K-(pt-B)+(L-B),v[3]=pt;const co=o(uo,f,4,v,g);return g[co-1]}(y,p,w,d,_,m,k)},n.orient2dfast=function(y,p,w,d,_,m){return(p-m)*(w-_)-(y-_)*(d-m)},Object.defineProperty(n,"__esModule",{value:!0})})})(Cn,Cn.exports);var Mf=Cn.exports,Gr=mf,Be=wf,Af=kf,Nf=Mf.orient2d;Be.default&&(Be=Be.default);Wn.exports=oo;Wn.exports.default=oo;function oo(t,e,n){e=Math.max(0,e===void 0?2:e),n=n||0;var r=Xf(t),i=new Gr(16);i.toBBox=function(d){return{minX:d[0],minY:d[1],maxX:d[0],maxY:d[1]}},i.compareMinX=function(d,_){return d[0]-_[0]},i.compareMinY=function(d,_){return d[1]-_[1]},i.load(t);for(var o=[],l=0,s;l<r.length;l++){var u=r[l];i.remove(u),s=Ur(u,s),o.push(s)}var a=new Gr(16);for(l=0;l<o.length;l++)a.insert(hn(o[l]));for(var c=e*e,h=n*n;o.length;){var f=o.shift(),g=f.p,v=f.next.p,y=dn(g,v);if(!(y<h)){var p=y/c;u=Ef(i,f.prev.p,g,v,f.next.next.p,p,a),u&&Math.min(dn(u,g),dn(u,v))<=p&&(o.push(f),o.push(Ur(u,f)),i.remove(u),a.remove(f),a.insert(hn(f)),a.insert(hn(f.next)))}}f=s;var w=[];do w.push(f.p),f=f.next;while(f!==s);return w.push(f.p),w}function Ef(t,e,n,r,i,o,l){for(var s=new Be([],Sf),u=t.data;u;){for(var a=0;a<u.children.length;a++){var c=u.children[a],h=u.leaf?gn(c,n,r):$f(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),g=f.node,v=gn(g,e,n),y=gn(g,r,i);if(f.dist<v&&f.dist<y&&Kr(n,g,l)&&Kr(r,g,l))return g}u=s.pop(),u&&(u=u.node)}return null}function Sf(t,e){return t.dist-e.dist}function $f(t,e,n){if(Jr(t,n)||Jr(e,n))return 0;var r=$e(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(r===0)return 0;var i=$e(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(i===0)return 0;var o=$e(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(o===0)return 0;var l=$e(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return l===0?0:Math.min(r,i,o,l)}function Jr(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Kr(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:l}),u=0;u<s.length;u++)if(Of(s[u].p,s[u].next.p,t,e))return!1;return!0}function Zt(t,e,n){return Nf(t[0],t[1],e[0],e[1],n[0],n[1])}function Of(t,e,n,r){return t!==r&&e!==n&&Zt(t,e,n)>0!=Zt(t,e,r)>0&&Zt(n,r,t)>0!=Zt(n,r,e)>0}function hn(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Xf(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var l=t[o];l[0]<e[0]&&(e=l),l[0]>r[0]&&(r=l),l[1]<n[1]&&(n=l),l[1]>i[1]&&(i=l)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)Af(t[o],s)||u.push(t[o]);return If(u)}function Ur(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function dn(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function gn(t,e,n){var r=e[0],i=e[1],o=n[0]-r,l=n[1]-i;if(o!==0||l!==0){var s=((t[0]-r)*o+(t[1]-i)*l)/(o*o+l*l);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=l*s)}return o=t[0]-r,l=t[1]-i,o*o+l*l}function $e(t,e,n,r,i,o,l,s){var u=n-t,a=r-e,c=l-i,h=s-o,f=t-i,g=e-o,v=u*u+a*a,y=u*c+a*h,p=c*c+h*h,w=u*f+a*g,d=c*f+h*g,_=v*p-y*y,m,x,b,A,k=_,E=_;_===0?(x=0,k=1,A=d,E=p):(x=y*d-p*w,A=v*d-y*w,x<0?(x=0,A=d,E=p):x>k&&(x=k,A=d+y,E=p)),A<0?(A=0,-w<0?x=0:-w>v?x=k:(x=-w,k=v)):A>E&&(A=E,-w+y<0?x=0:-w+y>v?x=k:(x=-w+y,k=v)),m=x===0?0:x/k,b=A===0?0:A/E;var S=(1-m)*t+m*n,N=(1-m)*e+m*r,C=(1-b)*i+b*l,M=(1-b)*o+b*s,I=C-S,Y=M-N;return I*I+Y*Y}function Cf(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function If(t){t.sort(Cf);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&Zt(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&Zt(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}var Rf=Wn.exports;const Bf=gf(Rf);class St{constructor(e=0,n=0){le(this,"x");le(this,"y");[this.x,this.y]=[e,n]}array(){return[this.x,this.y]}clone(){return new St(this.x,this.y)}mag(){return Math.sqrt(this.dot(this))}set(e){[this.x,this.y]=[e.x,e.y]}add(e){return new St(this.x+e.x,this.y+e.y)}sub(e){return new St(this.x-e.x,this.y-e.y)}dist(e){return this.sub(e).mag()}dot(e){return this.x*e.x+this.y*e.y}angle(e){return Math.acos(Math.min(Math.max(this.dot(e)/this.mag()/e.mag(),-1),1))}scale(e){return new St(this.x*e,this.y*e)}rotate(e){let[n,r]=[Math.cos(e),Math.sin(e)];return new St(n*this.x-r*this.y,r*this.x+n*this.y)}mix(e,n){return new St(this.x*(1-n)+e.x*n,this.y*(1-n)+e.y*n)}normalize(){return this.scale(1/this.mag())}distSegment(e,n){var r=e.dist(n);if(r<1e-5)return this.dist(e);var i=n.sub(e).scale(1/r),o=this.sub(e),l=o.dot(i);return l<0?this.dist(e):l>r?this.dist(n):e.mix(n,l/r).dist(this)}}const Rt={hoveredHexKeywords:"",init(t,e,n,r,i){const o=this,l=F("#"+t).attr("viewBox",`0 0 ${e} ${n}`).on("click",function(u){u.defaultPrevented||(it("path.border").classed("border-highlight",!1),it("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!1),it("path.hex").classed("hex-highlight",!1).classed("hex-not-highlight",!1).classed("hex-selected",!1).classed("hex-not-selected",!1),it("path.hex-label").classed("hex-label-highlight",!1).classed("hex-label-not-highlight",!1),it("text.topic-label").classed("topic-label-highlight",!1),i.nodesSelected(null,null),i.keywordsSelected(null,null),i.emotionSelected(null,null),o.highlighted_nodes=null)});l.select("g.topic_region");const s=l.select("g.keyword_region").attr("transform",`translate(${r.left}, ${r.top})`);s.append("g").attr("class","hex-group"),s.append("g").attr("class","label-group"),this.keyword_region_size={width:e-r.left-r.right,height:n-r.top-r.bottom},this.xScale_keywords=ht().domain([0,1]).range([0,this.keyword_region_size.width]),this.yScale_keywords=ht().domain([0,1]).range([0,this.keyword_region_size.height]),this.handlers=i,this.width=e,this.height=n,this.svgId=t,this.clicked_topic=null,this.clicked_cc=[null,null],this.clicked_hex=null,this.highlighted_nodes=null,this.hoveredHexKeywords=""},_update_chunks(t,e,n){console.log(t);const r=Object.keys(t).map(u=>t[u].length),i=[an(r),ke(r)],o=ht().domain(i).range([150,280]),l=pn(Object.keys(t),this.width,this.height,{width:200,height:200});F("#"+this.svgId).select("g.chunk_region").selectAll("g.topic").data(Object.keys(t)).join("g").attr("class","topic").each(async function(u,a){const c=F(this);c.selectAll("*").remove();const h=o(t[u].length),f=l[u].center,g=[f[0]-h/2,f[1]-h/2];ht().domain([0,1]).range([g[0],g[0]+h]),ht().domain([0,1]).range([g[1],g[1]+h]),c.append("defs").append("clipPath").attr("id",`clip-${a}`).append("rect").attr("x",-h/2).attr("y",-h/2).attr("width",h).attr("height",h).attr("rx","5"),c.append("text").attr("x",f[0]).attr("y",f[1]).text(u).attr("font-size","0.7rem").attr("text-anchor","middle").attr("dominant-baseline","middle"),await yo(),console.log({group_statistics:e},u);const p=e[u].emotion_counts,w=e[u].total;let d=0,_=[];Object.keys(p).forEach(m=>{const b=p[m]/w*Math.PI*2,A=tf()({innerRadius:45,outerRadius:h/2*Math.sqrt(2),startAngle:d,endAngle:d+b});d+=b,_.push(A)}),c.selectAll("path.emotion").data(_).join("path").attr("class","emotion").attr("d",m=>m).attr("transform",`translate(${f[0]}, ${f[1]})`).attr("fill",(m,x)=>n(Object.keys(p)[x])).attr("opacity",.8).attr("clip-path",`url(#clip-${a})`)})},update_chunks(t,e,n){const r=Object.keys(t).map(a=>t[a].length),i=[an(r),ke(r)],o=ht().domain(i).range([150,280]),l=pn(Object.keys(t),this.width,this.height,{width:200,height:200}),s=F("#"+this.svgId).select("g.chunk_region"),u=this;s.selectAll("g.topic").data(Object.keys(t)).join("g").attr("class","topic").each(function(a){const c=F(this);c.selectAll("*").remove();const h=o(t[a].length),f=l[a].center,g=[f[0]-h/2,f[1]-h/2],v=ht().domain([0,1]).range([g[0],g[0]+h]),y=ht().domain([0,1]).range([g[1],g[1]+h]);c.append("rect").attr("class","bbox shadow").attr("x",f[0]-h/2).attr("y",f[1]-h/2).attr("width",h).attr("height",h).attr("fill","white").attr("stroke","#cdcdcd").attr("stroke-width",1).attr("rx","5");const p=c.append("g").attr("class","node-group"),w=p.selectAll("circle.node").data(t[a]).join("circle").attr("class","node").attr("r",m=>5).attr("fill",m=>n(m.emotion)).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("cx",m=>v(m.coordinate[0])).attr("cy",m=>y(m.coordinate[1]));c.append("text").attr("class","topic-label").attr("x",f[0]-h/2+5).attr("y",f[1]-h/2-10).text(a).attr("cursor","pointer").on("click",function(m,x){if(m.preventDefault(),it("text.topic-label").classed("topic-label-highlight",!1),u.clicked_topic!==x){F(this).classed("topic-label-highlight",!0),u.clicked_nodes=t[x];const b=u.clicked_nodes.map(k=>k.id),A=b.map(k=>_[k]);u.clicked_topic=x,u.clicked_cc=[null,null],it("path.border").classed("border-highlight",!1),u.handlers.nodesSelected(A,x),u.highlighted_nodes=A,it("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!0).filter(k=>b.includes(k.id)).classed("node-not-highlight",!1).classed("node-highlight",!0)}else u.clicked_topic=null,it("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!1),u.handlers.nodesSelected(null,null),u.highlighted_nodes=null});const d=5;let _={};t[a].forEach(m=>{_[m.id]=m}),Gi(t[a]).alphaMin(.1).force("collide",Vi(d)).force("x_force",Lu(m=>v(m.coordinate[0]))).force("y_force",Fu(m=>y(m.coordinate[1]))).on("tick",()=>{w.attr("cx",x=>x.x=Ke(x.x,[f[0]-h/2+d,f[0]+h/2-d])).attr("cy",x=>x.y=Ke(x.y,[f[1]-h/2+d,f[1]+h/2-d]));let m=[];e[a].forEach((x,b)=>{const A=x.map(k=>_[k]);m.push({topic:a,index:b,path:lo(c,A,d)})}),c.selectAll("path.border").data(m).join(x=>x.append("path").attr("class","border").attr("d",b=>b.path).attr("fill","#ebebeb").attr("stroke","gray").attr("stroke-width",1).attr("filter","url(#drop-shadow-border)").attr("cursor","pointer"),x=>x.transition().duration(0).attr("d",b=>b.path)).selection().on("click",function(x,b){x.preventDefault(),it("path.border").classed("border-highlight",!1);const A=it("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!0);if(u.clicked_cc[0]===b.topic&&u.clicked_cc[1]===b.index)u.clicked_cc=[null,null],u.handlers.nodesSelected(null,null),A.classed("node-highlight",!1).classed("node-not-highlight",!1);else{u.clicked_cc=[b.topic,b.index],u.clicked_topic=null,it("text.topic-label").classed("topic-label-highlight",!1),F(this).classed("border-highlight",!0);const k=e[b.topic][b.index],E=k.map(S=>_[S]);u.handlers.nodesSelected(E,b.topic+"()"),u.highlighted_nodes=E,A.filter(S=>k.includes(S.id)).classed("node-not-highlight",!1).classed("node-highlight",!0)}}),p.raise()})})},update_keywords(t,e){const n=this.xScale_keywords,r=this.yScale_keywords,i=df().x(p=>n(t.keyword_coordinates[p][0])).y(p=>r(t.keyword_coordinates[p][1])).radius(20).extent([[0,0],[this.keyword_region_size.width,this.keyword_region_size.height]]),o=i(Object.keys(t.keyword_coordinates)),l=p=>Lo(p,w=>t.keyword_statistics[w].frequency),s=ke(o,l),u=to([0,Math.sqrt(s)],Fc),a=i.centers(),c=(p,w)=>{let d=1e5,_=0;return a.forEach((m,x)=>{const b=Math.pow(m[0]-p,2)+Math.pow(m[1]-w,2);b<d&&(d=b,_=x)}),_},h=F("#"+this.svgId).select("g.keyword_region"),f=t.keyword_coordinates,g=t.keyword_statistics,v=this;h.select("g.hex-group").selectAll("path.hex").data(o).join("path").attr("class","hex").attr("d",p=>`M${p.x},${p.y}${i.hexagon()}`).attr("fill",p=>u(Math.sqrt(l(p)))).attr("opacity",.8).attr("stroke","white").attr("stroke-width",.5).attr("cursor","pointer").on("mousemove",function(p){F(".tooltip").style("left",p.clientX+10+"px").style("top",p.clientY-30+"px")}).on("mouseover",function(p,w){F(this).classed("hex-hover",!0).raise(),it("text.label").classed("hex-label-hover",!1).filter(d=>d[0]===w[0]).classed("hex-label-hover",!0),F(".tooltip").classed("show-tooltip",!0).text(w)}).on("mouseout",function(p,w){F(this).classed("hex-hover",!1),it("text.label").filter(d=>d[0]===w[0]).classed("hex-label-hover",!1),F(".tooltip").classed("show-tooltip",!1)}).on("click",function(p,w){p.preventDefault();const d=it("path.hex").classed("hex-selected",!1).classed("hex-not-selected",!0);v.clicked_hex===w[0]?(v.clicked_hex=null,v.handlers.keywordsSelected(null,null),d.classed("hex-selected",!1).classed("hex-not-selected",!1)):(v.clicked_hex=w[0],v.handlers.keywordsSelected(w,w),F(this).classed("hex-selected",!0).classed("hex-not-selected",!1).raise())});let y=new Array(a.length).fill(null);Object.keys(f).forEach(p=>{const w=f[p],d=c(n(w[0]),r(w[1]));if(y[d]!=null){const _=g[y[d]].frequency;g[p].frequency>_&&(y[d]=p)}else y[d]=p}),console.log(o),h.select("g.label-group").selectAll("text.label").data(o).join("text").text(p=>Tf(p[0])||"").attr("class","label").attr("x",p=>p.x).attr("y",p=>p.y).attr("fill",p=>Math.sqrt(l(p)/s)>.65?"white":"black").attr("opacity",p=>p[0]===null?0:l(p)>15?1:0).attr("font-size","0.8rem").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("pointer-events","none")},_update_keywords(t,e){console.log(t);const n=this.xScale_keywords,r=this.yScale_keywords,i=F("#"+this.svgId).select("g.keyword_region"),o=t.keyword_coordinates,l=t.keyword_statistics;i.selectAll("circle.keyword").data(Object.keys(o)).join("circle").attr("class","keyword").attr("r",s=>(console.log(s),e(l[s].frequency))).attr("cx",s=>n(o[s][0])).attr("cy",s=>r(o[s][1])).attr("fill","white").attr("stroke","black").attr("stroke-width",1),i.selectAll("text.label").data(Object.keys(o)).join("text").text(s=>s).attr("class","label").attr("x",s=>n(o[s][0])).attr("y",s=>r(o[s][1])).attr("opacity",s=>l[s].frequency>10?1:0).attr("font-size","0.8rem").attr("text-anchor","middle").attr("dominant-baseline","middle")},update_treemap(t,e,n,r,i,o,l){const s=Qi,u={name:"root",children:Object.keys(e).map(g=>({name:g,value:Math.sqrt(e[g].length),total:e[g].length}))},a=Ec().tile(s).size([this.width,this.height]).padding(1).round(!0)(Kn(u).sum(g=>g.value).sort((g,v)=>v.value-g.value));let c={};n.forEach(g=>{c[g.id]=g}),console.log(t,{groups:e},{nodes:n},{links:r},{weights:i});const h=F("#"+t);console.log(h),h.attr("viewBox").split(" ")[2],h.attr("viewBox").split(" ")[3];const f=this;h.selectAll("g.group").data(a.leaves()).join("g").attr("class","group").each(function(g){const v=F(this),y=g.data.name;console.log(y,l(y)),v.selectAll("*").remove(),F(this).append("g").attr("class","link-group");const p=F(this).append("g").attr("class","node-group"),w={x1:g.x0,y1:g.y0,x2:g.x1,y2:g.y1,width:g.x1-g.x0,height:g.y1-g.y0,center:[g.x0+(g.x1-g.x0)/2,g.y0+(g.y1-g.y0)/2]};v.append("rect").attr("id",m=>m.name).attr("x",w.x1).attr("y",w.y1).attr("fill","none").attr("width",w.width).attr("height",w.height).attr("stroke","black").attr("stroke-width",1),v.append("text").attr("x",w.x1+5).attr("y",w.y1+15).text(()=>g.data.name+" - "+g.data.total);let d=e[y];d.forEach(m=>{m.bbox=w}),r.filter(m=>{let x,b;m.source.id?x=m.source.id:x=m.source,m.target.id?b=m.target.id:b=m.target;const A=c[x].topic,k=c[b].topic;return A===y&&k===y&&(m.inner_outer="inner"),A===y&&k===y}),Qr(d,i);const _=5;p.selectAll("circle").data(d).join("circle").attr("class","node").attr("r",_).attr("fill",m=>l(m.topic)).attr("stroke","black").attr("stroke-width",1).attr("cursor","pointer").attr("cx",m=>m.x=m.coordinate[0]*w.width+w.x1).attr("cy",m=>m.y=m.coordinate[1]*w.height+w.y1).on("mouseover",function(){F(this).attr("stroke-width",2)}).on("mouseout",function(){F(this).attr("stroke-width",1)}).on("click",(m,x)=>f.handleNodeClick(m,x)).selection()})},update_force(t,e,n,r,i,o,l){console.log("update force",{groups:t},{nodes:e},{links:n},{weights:r});const s=F("#"+this.svgId).select("g.chunk_region"),u=Object.keys(t).map(g=>t[g].length),a=[an(u),ke(u)],c=ht().domain(a).range([150,280]),h=pn(Object.keys(t),this.width,this.height,{width:200,height:200});let f={};e.forEach(g=>{f[g.id]=g}),s.selectAll("g.group").data(Object.keys(t)).join("g").attr("class","group").each(function(g){const v=F(this),y=g;v.selectAll("*").remove();const p=F(this).append("g").attr("class","link-group"),w=F(this).append("g").attr("class","node-group"),d=c(t[g].length),_=h[g].center,m=[_[0]-d/2,_[1]-d/2];ht().domain([0,1]).range([m[0],m[0]+d]),ht().domain([0,1]).range([m[1],m[1]+d]),v.append("rect").attr("x",_[0]-d/2).attr("y",_[1]-d/2).attr("width",d).attr("height",d).attr("fill","none").attr("filter","url(#drop-shadow-border)").attr("stroke","#c3c3c3").attr("stroke-width",1).attr("cursor","pointer").attr("opacity",.4).attr("rx","5"),v.append("text").attr("x",_[0]-d/2+5).attr("y",_[1]-d/2-10).text(g);let x=n.filter(C=>{let M,I;C.source.id?M=C.source.id:M=C.source,C.target.id?I=C.target.id:I=C.target;const Y=f[M].topic,$=f[I].topic;return Y===y&&$===y&&(C.inner_outer="inner"),Y===y&&$===y});const b=t[y];x=Qr(b,r);const A=5,k=w.selectAll("circle").data(b).join("circle").attr("class","node").attr("r",A).attr("fill",C=>l(C.emotion)).attr("stroke","black").attr("stroke-width",1).attr("cursor","pointer").attr("cx",C=>C.x=C.coordinate[0]*d+m[0]).attr("cy",C=>C.y=C.coordinate[1]*d+m[1]).on("mouseover",function(){F(this).attr("stroke-width",2)}).on("mouseout",function(){F(this).attr("stroke-width",1)});console.log(x);const E=p.selectAll("line.link").data(x.filter(C=>C.type==="real")).join("line").attr("class","link").attr("opacity",.5).attr("stroke","gray").attr("stroke-width",1).selection(),S={x1:m[0],y1:m[1],x2:m[0]+d,y2:m[1]+d},N=b.filter(C=>C.degree>0);Yf(v,N,x,_,S,k,E,f,A)})},highlight_keywords(t,e){e.keyword_statistics;const n=F("#"+this.svgId).select("g.keyword_region");n.selectAll("path.hex").classed("hex-highlight",!1).classed("hex-not-highlight",!0).filter(r=>r.some(i=>t.includes(i))).classed("hex-not-highlight",!1).classed("hex-highlight",!0),n.selectAll("text.label").classed("hex-label-highlight",!1).classed("hex-label-not-highlight",!0).filter(r=>r.some(i=>t.includes(i))).classed("hex-label-not-highlight",!1).classed("hex-label-highlight",!0)},dehighlight_keywords(){const t=F("#"+this.svgId).select("g.keyword_region");t.selectAll("path.hex").classed("hex-highlight",!1).classed("hex-not-highlight",!1),t.selectAll("text.label").classed("hex-label-highlight",!1).classed("hex-label-not-highlight",!1)},highlight_nodes(t){F("#"+this.svgId).select("g.chunk_region").selectAll("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!0).filter(n=>t==null?void 0:t.includes(n)).classed("node-not-highlight",!1).classed("node-highlight",!0),this.highlighted_nodes=t},dehighlight_nodes(){F("#"+this.svgId).select("g.chunk_region").selectAll("circle.node").classed("node-highlight",!1).classed("node-not-highlight",!1),this.highlighted_nodes=null}};function Tf(t){return t.length>2&&(t=t.slice(0,2)+".."),t}function Yf(t,e,n,r,i,o,l,s,u){console.log({group_nodes:e},{group_links:n},o);const a=qu(),c=Iu(n).id(h=>h.id).distance(h=>h.weight);Gi(e).force("link",c).force("charge",a.distanceMin(10)).force("center",du(r[0],r[1]).strength(.1)).force("collide",Vi(u)).alphaMin(.01).on("tick",()=>{o.attr("cx",h=>h.x=Ke(h.x,[i.x1+u+1,i.x2-u-1])).attr("cy",h=>h.y=Ke(h.y,[i.y1+u+1,i.y2-u-1])),l.attr("x1",h=>h.source.x).attr("y1",h=>h.source.y).attr("x2",h=>h.target.x).attr("y2",h=>h.target.y),lo(t,e,u)})}function lo(t,e,n){const r=1.5*n,i=1.5*n,o=[[-r,-i],[0,-i],[r,-i],[-r,0],[r,0],[-r,i],[0,i],[r,i]];let l=[];e.forEach(c=>{o.forEach(h=>{l.push([c.x+h[0],c.y+h[1]])})});let s=Bf(l,4,0);s.splice(s.length-1,1);const u=Pf(s);return zf(u)}function Pf(t,e=.333){const n=t.map(o=>new St(o[0],o[1]));let r=[],i=n.length;if(i>1){let o=n[0].sub(n[i-1]),l=o.mag();console.assert(l!=0),o=o.scale(1/l);for(let s=0;s<i;s++){let u=(s+1)%i,a=n[u].sub(n[s]),c=a.mag();a=a.scale(1/c);let h=o.add(a).normalize();h.dot(a)<0&&(h=new St(0,0).sub(h)),n[s].notsmooth?r.push(n[s],n[s],n[s]):r.push(n[s].sub(h.scale(l*e)),n[s],n[s].add(h.scale(c*e))),o=a,l=c}}return r}function zf(t){const e=t.length;let n=Hi(),r=t[1];n.moveTo(r.x,r.y);for(let i=0;i<e;i+=3){let o=t[(i+2)%e],l=t[(i+3)%e],s=t[(i+4)%e];n.bezierCurveTo(o.x,o.y,l.x,l.y,s.x,s.y)}return n}function Qr(t,e){let n=[];for(let r=0;r<t.length;r++)for(let i=0;i<t.length;i++)r!==i&&e[t[r].id]&&e[t[r].id][t[i].id]&&n.push({source:t[r].id,target:t[i].id,weight:e[t[r].id][t[i].id],type:"real"});return n}function Ke(t,e){return Math.max(Math.min(t,e[1]),e[0])}function pn(t,e,n,r){console.log(t),t[0]="",t[7]="";const i=Zi().domain(t).range([0,0+Math.PI*2]);let o={};const l=e/2-r.width/2-38,s=n/2-r.height/2;return t.forEach((u,a)=>{const c=i(u),h=l*s/Math.sqrt(Math.pow(s*Math.cos(c),2)+Math.pow(l*Math.sin(c),2)),f=e/2+h*Math.cos(c),g=n/2+h*Math.sin(c);o[u]={center:[f,g]}}),o}function Zr(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function Wr(t){let e,n,r,i,o,l;function s(){return t[3](t[5])}function u(){return t[4](t[5])}return{c(){e=ot("rect"),n=ot("circle"),r=ot("text"),i=at(t[5]),O(e,"role","button"),O(e,"tabindex",t[7]),O(e,"class","border hoverable svelte-khdctm"),O(e,"x",mn-2*Dt),O(e,"y",_n-Dt+t[7]*t[2]-Dt/2),O(e,"width","120"),O(e,"height",6/2*Dt),O(e,"rx","5"),O(e,"fill","white"),O(e,"cursor","pointer"),mt(e,"selectedEmotion",t[0]===t[5]),O(n,"cx",mn),O(n,"cy",_n+t[7]*t[2]),O(n,"r",Dt),O(n,"fill",Zn(t[5])),O(n,"stroke","black"),O(n,"stroke-width","1"),O(n,"pointer-events","none"),O(r,"x",mn+2*Dt),O(r,"y",_n+t[7]*t[2]+1.5),O(r,"font-size","0.9rem"),O(r,"text-anchor","center"),O(r,"pointer-events","none"),O(r,"dominant-baseline","middle")},m(a,c){G(a,e,c),G(a,n,c),G(a,r,c),R(r,i),o||(l=[Z(e,"keyup",s),Z(e,"click",u)],o=!0)},p(a,c){t=a,c&1&&mt(e,"selectedEmotion",t[0]===t[5])},d(a){a&&(j(e),j(n),j(r)),o=!1,gt(l)}}}function Df(t){let e,n,r=et(Xn),i=[];for(let o=0;o<r.length;o+=1)i[o]=Wr(Zr(t,r,o));return{c(){e=P("div"),n=ot("svg");for(let o=0;o<i.length;o+=1)i[o].c();O(n,"viewBox","0 0 150 150"),O(e,"class","w-full h-full flex items-cetner justify-center")},m(o,l){G(o,e,l),R(e,n);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(n,null)},p(o,[l]){if(l&7){r=et(Xn);let s;for(s=0;s<r.length;s+=1){const u=Zr(o,r,s);i[s]?i[s].p(u,l):(i[s]=Wr(u),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},i:jt,o:jt,d(o){o&&j(e),Yt(i,o)}}}const Dt=7,mn=40,_n=30;function qf(t,e,n){const r=di();let{selectedEmotion:i=void 0}=e;const o=3*Dt+1.5,l=u=>{i===u?n(0,i=void 0):n(0,i=u),r("selectEmotion",i)},s=u=>{i===u?n(0,i=void 0):n(0,i=u),r("selectEmotion",i)};return t.$$set=u=>{"selectedEmotion"in u&&n(0,i=u.selectedEmotion)},[i,r,o,l,s]}class Lf extends We{constructor(e){super(),Ze(this,e,qf,Df,we,{selectedEmotion:0})}}function ti(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function ei(t){let e;return{c(){e=P("div"),e.textContent="None",O(e,"class","text-gray-500")},m(n,r){G(n,e,r)},d(n){n&&j(e)}}}function ni(t){let e,n;return{c(){e=P("div"),n=at(t[4])},m(r,i){G(r,e,i),R(e,n)},p(r,i){i[0]&16&&Ot(n,r[4])},d(r){r&&j(e)}}}function ri(t){let e,n;return{c(){e=P("div"),n=at(t[3])},m(r,i){G(r,e,i),R(e,n)},p(r,i){i[0]&8&&Ot(n,r[3])},d(r){r&&j(e)}}}function ii(t){let e,n=et(t[2]),r=[];for(let i=0;i<n.length;i+=1)r[i]=oi(ti(t,n,i));return{c(){e=P("div");for(let i=0;i<r.length;i+=1)r[i].c();O(e,"class","flex flex-wrap justify-start items-center gap-x-0.5 gap-y-1")},m(i,o){G(i,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(i,o){if(o[0]&6){n=et(i[2]);let l;for(l=0;l<n.length;l+=1){const s=ti(i,n,l);r[l]?r[l].p(s,o):(r[l]=oi(s),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(i){i&&j(e),Yt(r,i)}}}function oi(t){let e,n=t[29]+"",r,i,o;function l(){return t[18](t[29])}function s(){return t[19](t[29])}return{c(){var u;e=P("span"),r=at(n),O(e,"role","button"),O(e,"tabindex",t[31]),O(e,"class","px-0.5 border border-gray rounded clickable svelte-1f4392y"),mt(e,"keyword-selected",(u=t[1])==null?void 0:u.includes(t[29]))},m(u,a){G(u,e,a),R(e,r),i||(o=[Z(e,"keyup",l),Z(e,"click",s)],i=!0)},p(u,a){var c;t=u,a[0]&4&&n!==(n=t[29]+"")&&Ot(r,n),a[0]&6&&mt(e,"keyword-selected",(c=t[1])==null?void 0:c.includes(t[29]))},d(u){u&&j(e),i=!1,gt(o)}}}function Ff(t){let e,n,r,i,o,l,s,u,a,c,h,f,g,v,y,p,w,d,_,m,x,b,A,k,E,S;function N(X){t[16](X)}let C={};t[4]!==void 0&&(C.selectedEmotion=t[4]),r=new Lf({props:C}),ee.push(()=>Mo(r,"selectedEmotion",N)),r.$on("selectEmotion",t[17]);let M=!t[3]&&!t[2]&&!t[4]&&ei(),I=t[4]&&ni(t),Y=t[3]&&ri(t),$=t[2]&&ii(t);return{c(){e=P("div"),n=P("div"),Rn(r.$$.fragment),o=V(),l=P("div"),s=P("span"),s.textContent="Filter:",u=V(),M&&M.c(),a=V(),I&&I.c(),c=V(),Y&&Y.c(),h=V(),$&&$.c(),f=V(),g=P("div"),v=V(),y=ot("svg"),p=ot("g"),w=ot("g"),d=ot("defs"),_=ot("filter"),m=ot("feOffset"),x=ot("feGaussianBlur"),b=ot("feBlend"),A=ot("defs"),k=ot("filter"),E=ot("feDropShadow"),O(n,"class","absolute top-5 right-0 w-[150px] h-[150px]"),O(s,"class","text-base font-bold"),O(l,"class","absolute flex flex-col text-sm top-[170px] right-1 w-[120px] h-[150px] text-left shadow rounded px-0.5 divide-y divide-black overflow-y-auto"),O(g,"class","tooltip absolute w-fit h-fit pl-0.5 pr-1 py-1 rounded bg-white border border-black opacity-0 pointer-events-none text-xs"),O(p,"class","chunk_region"),O(w,"class","keyword_region"),O(m,"result","offOut"),O(m,"in","SourceAlpha"),O(m,"dx","0"),O(m,"dy","3"),O(x,"result","blurOut"),O(x,"in","offOut"),O(x,"stdDeviation","2"),O(b,"in","SourceGraphic"),O(b,"in2","blurOut"),O(b,"mode","normal"),O(b,"flood-color","rgba(0, 0, 0, 0)"),O(_,"id","drop-shadow-hex"),O(_,"x","0"),O(_,"y","0"),O(E,"dx","0"),O(E,"dy","0"),O(E,"stdDeviation","2"),O(E,"flood-color","gray"),O(k,"id","drop-shadow-border"),O(y,"id",so),O(y,"class","w-full h-full overflow-visible"),O(e,"class","w-full h-full relative p-2 pt-4")},m(X,T){G(X,e,T),R(e,n),Ue(r,n,null),R(e,o),R(e,l),R(l,s),R(l,u),M&&M.m(l,null),R(l,a),I&&I.m(l,null),R(l,c),Y&&Y.m(l,null),R(l,h),$&&$.m(l,null),R(e,f),R(e,g),R(e,v),R(e,y),R(y,p),R(y,w),R(y,d),R(d,_),R(_,m),R(_,x),R(_,b),R(y,A),R(A,k),R(k,E),t[20](e),S=!0},p(X,T){const q={};!i&&T[0]&16&&(i=!0,q.selectedEmotion=X[4],vo(()=>i=!1)),r.$set(q),!X[3]&&!X[2]&&!X[4]?M||(M=ei(),M.c(),M.m(l,a)):M&&(M.d(1),M=null),X[4]?I?I.p(X,T):(I=ni(X),I.c(),I.m(l,c)):I&&(I.d(1),I=null),X[3]?Y?Y.p(X,T):(Y=ri(X),Y.c(),Y.m(l,h)):Y&&(Y.d(1),Y=null),X[2]?$?$.p(X,T):($=ii(X),$.c(),$.m(l,null)):$&&($.d(1),$=null)},i(X){S||(Lt(r.$$.fragment,X),S=!0)},o(X){ge(r.$$.fragment,X),S=!1},d(X){X&&j(e),Qe(r),M&&M.d(),I&&I.d(),Y&&Y.d(),$&&$.d(),t[20](null)}}}const so="simgraph-svg";function li(t,e){if(!t)return e;if(!e)return t;const n=t.filter(r=>e.includes(r));return console.log(t,e,n),n}function Hf(t,e,n){let r,i,o;const l=di();let{topic_data:s}=e,{keyword_data:u}=e,a,c,h;const f={nodesSelected:x,keywordsSelected:b,emotionSelected:A},g={left:300,right:300,top:300,bottom:300};let v,y,p,w,d,_,m;function x(M,I){n(9,v=M),n(3,w=I)}function b(M){n(12,d=M),n(2,_=M),n(1,h=void 0),l("keywords-selected",d)}function A(M){if(console.log({emotion:M},s.nodes),n(4,m=M),!M){n(11,p=void 0);return}const I=s.nodes.filter(Y=>Y.emotion===M);n(11,p=I)}function k(M){m=M,n(4,m)}const E=M=>A(M.detail),S=M=>{h||n(1,h=[]),h.includes(M)?(n(1,h=h.filter(I=>I!==M)),h.length===0&&n(1,h=void 0)):(h.push(M),n(1,h=[...h]))},N=M=>{h||n(1,h=[]),h.includes(M)?(n(1,h=h.filter(I=>I!==M)),h.length===0&&n(1,h=void 0)):(h.push(M),n(1,h=[...h]))};function C(M){ee[M?"unshift":"push"](()=>{c=M,n(0,c)})}return t.$$set=M=>{"topic_data"in M&&n(6,s=M.topic_data),"keyword_data"in M&&n(7,u=M.keyword_data)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&n(15,r=c==null?void 0:c.clientWidth),t.$$.dirty[0]&1&&n(14,i=c==null?void 0:c.clientHeight),t.$$.dirty[0]&49152&&r&&i&&Rt.init(so,r,i,g,f),t.$$.dirty[0]&4102&&(M=>{console.log({filterClickedKeywords:h}),h?n(12,d=h):n(12,d=_),l("keywords-selected",d)})(),t.$$.dirty[0]&4160&&n(10,y=(M=>{if(d)return s.nodes.filter(Y=>Y.keywords.some($=>d.includes($)))})()),t.$$.dirty[0]&3584&&n(13,o=li(p,li(v,y))),t.$$.dirty[0]&64&&s&&(ht().domain([Math.min(...s.nodes.map(M=>M.degree)),Math.max(...s.nodes.map(M=>M.degree))]).range([3,12]),Rt.update_chunks(s.groups,s.group_ccs,Zn)),t.$$.dirty[0]&128&&u){const M=u.keyword_statistics,I=Object.keys(M).map(T=>M[T].frequency),Y=Math.min(...I),$=Math.max(...I),X=ht().domain([Y,$]).range([5,30]);Rt.update_keywords(u,X)}t.$$.dirty[0]&8576&&(M=>{if(console.log({highlight_chunks:o}),l("chunks-selected",o),!o){Rt.dehighlight_nodes(),Rt.dehighlight_keywords();return}Rt.highlight_nodes(o);let I=new Set;o.forEach(Y=>{Y.keywords.forEach($=>I.add($))}),n(8,a=Array.from(I)),Rt.highlight_keywords(a,u)})()},Rt.hoveredHexKeywords,[c,h,_,w,m,A,s,u,a,v,y,p,d,o,i,r,k,E,S,N,C]}class jf extends We{constructor(e){super(),Ze(this,e,Hf,Ff,we,{topic_data:6,keyword_data:7},null,[-1,-1])}}function si(t){let e,n,r={data:t[1]};return e=new uf({props:r}),t[8](e),{c(){Rn(e.$$.fragment)},m(i,o){Ue(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.data=i[1]),e.$set(l)},i(i){n||(Lt(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){t[8](null),Qe(e,i)}}}function Vf(t){let e,n,r,i,o,l,s,u,a,c,h={topic_data:t[0],keyword_data:t[2]};s=new jf({props:h}),t[7](s),s.$on("chunks-selected",t[5]),s.$on("keywords-selected",t[6]);let f=t[1]!=null&&si(t);return{c(){e=P("main"),n=P("div"),r=P("div"),i=P("div"),o=P("div"),o.innerHTML='<span>Sea of</span> <br/> <span class="title-hidden absolute h-fit mt-[-25px] svelte-1pq1glr">Voices</span>',l=V(),Rn(s.$$.fragment),u=V(),a=P("div"),f&&f.c(),O(o,"class","title absolute top-1 left-6 w-fit rounded py-4 px-4 text-left text-sky-600 svelte-1pq1glr"),O(i,"class","w-full h-full relative"),O(r,"class","flex flex-col justify-center items-center flex-1 h-full w-full basis-[70%] shrink-0"),O(a,"class","interview-viewer-container h-full w-full basis-[31%]"),O(n,"class","page flex space-x-1 h-full"),O(e,"class","h-[100vh] px-1")},m(g,v){G(g,e,v),R(e,n),R(n,r),R(r,i),R(i,o),R(i,l),Ue(s,i,null),R(n,u),R(n,a),f&&f.m(a,null),c=!0},p(g,[v]){const y={};v&1&&(y.topic_data=g[0]),v&4&&(y.keyword_data=g[2]),s.$set(y),g[1]!=null?f?(f.p(g,v),v&2&&Lt(f,1)):(f=si(g),f.c(),Lt(f,1),f.m(a,null)):f&&(bo(),ge(f,1,1,()=>{f=null}),ko())},i(g){c||(Lt(s.$$.fragment,g),Lt(f),c=!0)},o(g){ge(s.$$.fragment,g),ge(f),c=!1},d(g){g&&j(e),t[7](null),Qe(s),f&&f.d()}}}const Gf="http://infovis.cs.ucdavis.edu/lyudao/api/v1";let Jf=.83;function Kf(t){const e=(c,h,f)=>{let g=[],v=[],y,p,w=h.length;for(g.push(c);g.length>0;)if(c=g.shift(),!f[c])for(f[c]=!0,v.push(c),y=0;y<w;y+=1)p=h[y],p.source===c&&!f[p.target]?g.push(p.target):p.target===c&&!f[p.source]&&g.push(p.source);return v};let n=[],r,i,o,l,s,u,a={};for(r=0,i=t.length;r<i;r+=1)u=t[r],o=u.source,l=u.target,s=null,a[o]?a[l]||(s=l):s=o,s&&n.push(e(s,t,a));return n}function Uf(t,e,n){let r,i,o,l,s,u,a;hi(()=>{c()});function c(){fetch(`${Gf}/data/`).then(p=>p.json()).then(p=>{console.log({res:p}),n(1,i=p.interviews),a=p.topic_tsnes,n(0,s=h(p.chunk_links,p.chunk_nodes)),console.log({chunk_graph:s}),p.reports,n(2,o={keyword_coordinates:p.keyword_coordinates,keyword_statistics:p.keyword_statistics})})}function h(p,w){let d={},_={},m=[],x={};Object.keys(w).forEach(S=>{x[S]=w[S]}),p=p.filter(S=>S[2]>Jf);let b={};p.forEach(S=>{const N=S[0],C=S[1];x[N].topic===x[C].topic&&(_[N]=_[N]?_[N]+1:1,_[C]=_[C]?_[C]+1:1,d[N]||(d[N]={}),d[N][C]=S[2],m.push({source:N,target:C}),b[x[N].topic]||(b[x[N].topic]=[]),b[x[N].topic].push({source:N,target:C}))});let A={};Object.keys(b).forEach(S=>A[S]=Kf(b[S]));let k={};Object.keys(w).forEach(S=>{const N=w[S].topic,C=_[S]||0,M=a[S];w[S].degree=C,w[S].coordinate=M,k[N]||(k[N]=[]),k[N].push(w[S])});const E={groups:k,group_ccs:A,nodes:Object.keys(w).map(S=>w[S]),links:m,weights:d};return console.log(E.nodes.length,E.links.length),E}function f(p){if(!l)return;const w=p.detail;l.highlight_chunks(w)}function g(p){if(!l)return;const w=p.detail;if(console.log(w,o),w===null)l.dehighlight_keywords();else{const d=w.map(_=>r[_]);l.highlight_keywords(d,w)}}function v(p){ee[p?"unshift":"push"](()=>{u=p,n(4,u)})}function y(p){ee[p?"unshift":"push"](()=>{l=p,n(3,l)})}return t.$$.update=()=>{t.$$.dirty&1&&(r=(p=>{let w={};return s&&s.nodes.forEach(d=>{d.keywords.forEach(_=>{w[_]||(w[_]=[]),w[_].push(d)})}),w})())},[s,i,o,l,u,f,g,v,y]}class Qf extends We{constructor(e){super(),Ze(this,e,Uf,Vf,we,{})}}new Qf({target:document.getElementById("app")});
